(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["../demo/svg-detailer"]=e():t["../demo/svg-detailer"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fae3")}({"02f4":function(t,e,n){var r=n("4588"),i=n("be13");t.exports=function(t){return function(e,n){var l,a,u=String(i(e)),o=r(n),s=u.length;return o<0||o>=s?t?"":void 0:(l=u.charCodeAt(o),l<55296||l>56319||o+1===s||(a=u.charCodeAt(o+1))<56320||a>57343?t?u.charAt(o):l:t?u.slice(o,o+2):a-56320+(l-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),l=n("79e5"),a=n("be13"),u=n("2b4c"),o=n("520a"),s=u("species"),c=!l((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=u(t),v=!l((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),f=v?!l((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[s]=function(){return n}),n[p](""),!e})):void 0;if(!v||!f||"replace"===t&&!c||"split"===t&&!d){var b=/./[p],h=n(a,p,""[t],(function(t,e,n,r,i){return e.exec===o?v&&!i?{done:!0,value:b.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),m=h[0],g=h[1];r(String.prototype,t,m),i(RegExp.prototype,p,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},"230e":function(t,e,n){var r=n("d3f4"),i=n("7726").document,l=r(i)&&r(i.createElement);t.exports=function(t){return l?i.createElement(t):{}}},"23c6":function(t,e,n){var r=n("2d95"),i=n("2b4c")("toStringTag"),l="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:l?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},"28a5":function(t,e,n){"use strict";var r=n("aae3"),i=n("cb7c"),l=n("ebd6"),a=n("0390"),u=n("9def"),o=n("5f1b"),s=n("520a"),c=n("79e5"),d=Math.min,p=[].push,v="split",f="length",b="lastIndex",h=4294967295,m=!c((function(){RegExp(h,"y")}));n("214f")("split",2,(function(t,e,n,c){var g;return g="c"=="abbc"[v](/(b)*/)[1]||4!="test"[v](/(?:)/,-1)[f]||2!="ab"[v](/(?:ab)*/)[f]||4!="."[v](/(.?)(.?)/)[f]||"."[v](/()()/)[f]>1||""[v](/.?/)[f]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);var l,a,u,o=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=void 0===e?h:e>>>0,m=new RegExp(t.source,c+"g");while(l=s.call(m,i)){if(a=m[b],a>d&&(o.push(i.slice(d,l.index)),l[f]>1&&l.index<i[f]&&p.apply(o,l.slice(1)),u=l[0][f],d=a,o[f]>=v))break;m[b]===l.index&&m[b]++}return d===i[f]?!u&&m.test("")||o.push(""):o.push(i.slice(d)),o[f]>v?o.slice(0,v):o}:"0"[v](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),l=void 0==n?void 0:n[e];return void 0!==l?l.call(n,i,r):g.call(String(i),n,r)},function(t,e){var r=c(g,t,this,e,g!==n);if(r.done)return r.value;var s=i(t),p=String(this),v=l(s,RegExp),f=s.unicode,b=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(m?"y":"g"),y=new v(m?s:"^(?:"+s.source+")",b),x=void 0===e?h:e>>>0;if(0===x)return[];if(0===p.length)return null===o(y,p)?[p]:[];var S=0,E=0,C=[];while(E<p.length){y.lastIndex=m?E:0;var N,w=o(y,m?p:p.slice(E));if(null===w||(N=d(u(y.lastIndex+(m?0:E)),p.length))===S)E=a(p,E,f);else{if(C.push(p.slice(S,E)),C.length===x)return C;for(var A=1;A<=w.length-1;A++)if(C.push(w[A]),C.length===x)return C;E=S=N}}return C.push(p.slice(S)),C}]}))},"2aba":function(t,e,n){var r=n("7726"),i=n("32e9"),l=n("69a8"),a=n("ca5a")("src"),u=n("fa5b"),o="toString",s=(""+u).split(o);n("8378").inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,u){var o="function"==typeof n;o&&(l(n,"name")||i(n,"name",e)),t[e]!==n&&(o&&(l(n,a)||i(n,a,t[e]?""+t[e]:s.join(String(e)))),t===r?t[e]=n:u?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,o,(function(){return"function"==typeof this&&this[a]||u.call(this)}))},"2b4c":function(t,e,n){var r=n("5537")("wks"),i=n("ca5a"),l=n("7726").Symbol,a="function"==typeof l,u=t.exports=function(t){return r[t]||(r[t]=a&&l[t]||(a?l:i)("Symbol."+t))};u.store=r},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"32e9":function(t,e,n){var r=n("86cc"),i=n("4630");t.exports=n("9e1e")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},4588:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},"4f37":function(t,e,n){"use strict";n("aa77")("trim",(function(t){return function(){return t(this,3)}}))},"520a":function(t,e,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,l=String.prototype.replace,a=i,u="lastIndex",o=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[u]||0!==e[u]}(),s=void 0!==/()??/.exec("")[1],c=o||s;c&&(a=function(t){var e,n,a,c,d=this;return s&&(n=new RegExp("^"+d.source+"$(?!\\s)",r.call(d))),o&&(e=d[u]),a=i.call(d,t),o&&a&&(d[u]=d.global?a.index+a[0].length:e),s&&a&&a.length>1&&l.call(a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a}),t.exports=a},5537:function(t,e,n){var r=n("8378"),i=n("7726"),l="__core-js_shared__",a=i[l]||(i[l]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},"57e7":function(t,e,n){"use strict";var r=n("5ca1"),i=n("c366")(!1),l=[].indexOf,a=!!l&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n("2f21")(l)),"Array",{indexOf:function(t){return a?l.apply(this,arguments)||0:i(this,t,arguments[1])}})},"5ca1":function(t,e,n){var r=n("7726"),i=n("8378"),l=n("32e9"),a=n("2aba"),u=n("9b43"),o="prototype",s=function(t,e,n){var c,d,p,v,f=t&s.F,b=t&s.G,h=t&s.S,m=t&s.P,g=t&s.B,y=b?r:h?r[e]||(r[e]={}):(r[e]||{})[o],x=b?i:i[e]||(i[e]={}),S=x[o]||(x[o]={});for(c in b&&(n=e),n)d=!f&&y&&void 0!==y[c],p=(d?y:n)[c],v=g&&d?u(p,r):m&&"function"==typeof p?u(Function.call,p):p,y&&a(y,c,p,t&s.U),x[c]!=p&&l(x,c,v),m&&S[c]!=p&&(S[c]=p)};r.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var l=n.call(t,e);if("object"!==typeof l)throw new TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"626a":function(t,e,n){var r=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},6821:function(t,e,n){var r=n("626a"),i=n("be13");t.exports=function(t){return r(i(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"6b54":function(t,e,n){"use strict";n("3846");var r=n("cb7c"),i=n("0bfb"),l=n("9e1e"),a="toString",u=/./[a],o=function(t){n("2aba")(RegExp.prototype,a,t,!0)};n("79e5")((function(){return"/a/b"!=u.call({source:"a",flags:"b"})}))?o((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!l&&t instanceof RegExp?i.call(t):void 0)})):u.name!=a&&o((function(){return u.call(this)}))},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var r=n("4588"),i=Math.max,l=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):l(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},8378:function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},"86cc":function(t,e,n){var r=n("cb7c"),i=n("c69a"),l=n("6a99"),a=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(r(t),e=l(e,!0),r(n),i)try{return a(t,e,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"87b3":function(t,e,n){var r=Date.prototype,i="Invalid Date",l="toString",a=r[l],u=r.getTime;new Date(NaN)+""!=i&&n("2aba")(r,l,(function(){var t=u.call(this);return t===t?a.call(this):i}))},"9b43":function(t,e,n){var r=n("d8e8");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"9def":function(t,e,n){var r=n("4588"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a481:function(t,e,n){"use strict";var r=n("cb7c"),i=n("4bf8"),l=n("9def"),a=n("4588"),u=n("0390"),o=n("5f1b"),s=Math.max,c=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,b){return[function(r,i){var l=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,l,i):n.call(String(l),r,i)},function(t,e){var i=b(n,t,this,e);if(i.done)return i.value;var d=r(t),p=String(this),v="function"===typeof e;v||(e=String(e));var m=d.global;if(m){var g=d.unicode;d.lastIndex=0}var y=[];while(1){var x=o(d,p);if(null===x)break;if(y.push(x),!m)break;var S=String(x[0]);""===S&&(d.lastIndex=u(p,l(d.lastIndex),g))}for(var E="",C=0,N=0;N<y.length;N++){x=y[N];for(var w=String(x[0]),A=s(c(a(x.index),p.length),0),F=[],M=1;M<x.length;M++)F.push(f(x[M]));var k=x.groups;if(v){var I=[w].concat(F,A,p);void 0!==k&&I.push(k);var P=String(e.apply(void 0,I))}else P=h(w,p,A,F,k,e);A>=C&&(E+=p.slice(C,A)+P,C=A+w.length)}return E+p.slice(C)}];function h(t,e,r,l,a,u){var o=r+t.length,s=l.length,c=v;return void 0!==a&&(a=i(a),c=p),n.call(u,c,(function(n,i){var u;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(o);case"<":u=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>s){var p=d(c/10);return 0===p?n:p<=s?void 0===l[p-1]?i.charAt(1):l[p-1]+i.charAt(1):n}u=l[c-1]}return void 0===u?"":u}))}}))},aa77:function(t,e,n){var r=n("5ca1"),i=n("be13"),l=n("79e5"),a=n("fdef"),u="["+a+"]",o="âÂ",s=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),d=function(t,e,n){var i={},u=l((function(){return!!a[t]()||o[t]()!=o})),s=i[t]=u?e(p):a[t];n&&(i[n]=s),r(r.P+r.F*u,"String",i)},p=d.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(s,"")),2&e&&(t=t.replace(c,"")),t};t.exports=d},aae3:function(t,e,n){var r=n("d3f4"),i=n("2d95"),l=n("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[l])?!!e:"RegExp"==i(t))}},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,n){var r=n("6821"),i=n("9def"),l=n("77f1");t.exports=function(t){return function(e,n,a){var u,o=r(e),s=i(o.length),c=l(a,s);if(t&&n!=n){while(s>c)if(u=o[c++],u!=u)return!0}else for(;s>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")((function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a}))},ca5a:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cb7c:function(t,e,n){var r=n("d3f4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},ebd6:function(t,e,n){var r=n("cb7c"),i=n("d8e8"),l=n("2b4c")("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[l])?e:i(n)}},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(r){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fae3:function(t,e,n){"use strict";var r;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));n("4f37"),n("57e7"),n("a481"),n("28a5"),n("6b54"),n("87b3");var i,l,a,u,o,s,c,d,p,v,f,b,h,m,g,y,x=0,S=0,E="MOVE",C=1,N=6,w=4,A=.02,F=[],M=/Mac/.test(navigator.platform),k=!1,I="_",P=75,L="Verdana",H=10,T=!1,O=!1,B=!1,V={61:"=",106:"*",107:"+",109:"-",110:".",111:"/",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',"[":"{","]":"}",",":"<",".":">","/":"?","\\":"|"};function j(t){c=new Image,F=[],P=75,L="Verdana",E;var e=parseInt(t.attributes["data-width"].value),n=parseInt(t.attributes["data-height"].value);c.src=t.attributes["data-image"].value;var r=this;c.onload=function(i){d={top:t.offsetTop,left:t.offsetLeft},x=0,S=0;var p=e/n,v=c.width/c.height;s=document.createElementNS("http://www.w3.org/2000/svg","svg"),s.setAttributeNS(null,"id","svgLayer"),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),s.setAttributeNS(null,"version","1.1"),s.setAttributeNS(null,"style","position: inherit;"),s.setAttributeNS(null,"width",e),s.setAttributeNS(null,"height",n),t.appendChild(s),o=(p>=1&&v>=1||p<=1&&v<=1)&&v<=p||v<=1&&p>=1?s.height.baseVal.value/c.height:s.width.baseVal.value/c.width,l=o,a=(C/l).toString(),u=(N/l).toString(),g=o*c.width/2,y=o*c.height/2;var f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"id","xlt"),f.setAttributeNS(null,"transform","translate(0,0)scale("+parseFloat(l)+")"),s.appendChild(f);var b=document.createElementNS("http://www.w3.org/2000/svg","image");b.setAttributeNS(null,"id","xltImage"),b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y","0"),b.setAttributeNS(null,"width",c.width.toString()),b.setAttributeNS(null,"height",c.height.toString()),b.setAttributeNS(null,"preserveAspectRatio","none"),b.setAttributeNS("http://www.w3.org/1999/xlink","href",c.src),f.appendChild(b),j.prototype.buildSVGmenu(t),document.onkeydown=r.keyHandler(),document.onkeyup=r.keyUpHandler(),It(0,0,l),Nt("MOVE"),r.renderFunction=r.updateSvgByElement,r.touchSupported="ontouchstart"in document.documentElement,r.containerID=t,r.lastMousePoint={x:0,y:0},r.touchSupported?(r.mouseDownEvent="touchstart",r.mouseMoveEvent="touchmove",r.mouseUpEvent="touchend"):(r.mouseDownEvent="mousedown",r.mouseMoveEvent="mousemove",r.mouseUpEvent="mouseup",s.ondblclick=r.doubleClickHandler()),s.onmousedown=r.onSvgMouseDown(),r.mouseMoveHandler=r.onSvgMouseMove,r.mouseUpHandler=r.onSvgMouseUp,s.onmouseup=r.mouseUpHandler(),s.onmousemove=r.mouseMoveHandler()}}function G(t,e){return parseInt(t)+", "+parseInt(e)}function D(t,e){return G(t,e)+", "}function R(t,e,n,r,i,l,a,u){return"cubic"==E?"M "+G(t,e)+" C "+D(n,r)+D(i,l)+G(a,u):"M "+G(t,e)+" Q "+D(n,r)+G(a,u)}function U(t){for(var e=t.replace(/,/g,"").split(" "),n=0,r=[],i=0;i<e.length;i++)ht(e[i])&&(r[n]=e[i],n++);return r}function z(t){return D(t[0],t[1])+" "+D(t[2],t[3])+" "+D(t[4],t[5])+" "+D(t[6],t[7])}function $(t){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return e.setAttributeNS(null,"stroke",i),e.setAttributeNS(null,"stroke-width",a),e.setAttributeNS(null,"stroke-opacity","0.9"),e.setAttributeNS(null,"fill",""),e.setAttributeNS(null,"fill-opacity","0.0"),e.setAttributeNS(null,"stroke-linecap","round"),e}function Z(t){return t.setAttributeNS(null,"onmouseover","this.attributes['stroke-width'].value = '"+1.5*a+"';"),t.setAttributeNS(null,"onmouseout","this.attributes['stroke-width'].value = "+a+";"),t}function q(t){var e=b?b.id:"null",n=h?h.tagName:"null",r=h?h.parentElement.id:"null";Dt(B,"mouseenter eventTarget="+t.target.id+" thisGroup="+e+" thisElement="+n+" parent="+r+" "+E+" "),J(t.target)}function K(t){var e=b?b.id:"null",n=h?h.tagName:"null",r=h?h.parentElement.id:"null";Dt(B,"mouseleave eventTarget="+t.target.id+" thisGroup="+e+" thisElement="+n+" parent="+r+" "+E+" "),Y(t.target)}function W(t){return null!=t&&void 0!=t||(t=null),t.removeEventListener("mouseenter",q),t.removeEventListener("mouseleave",K),t.addEventListener("mouseenter",q),t.addEventListener("mouseleave",K),t}function J(t){if(Q(t))Dt(B,"Element conflict: "+t.attributes.class.value);else{if(Dt(B,"setEditElement no conflict"),null==b){var e="thisGroup is NULL";h&&(e+=", thisElement = "+h.toString()),Dt(B,t.attributes.class.value+" "+e),b=t}E,t.firstChild&&("path"!=t.firstChild.tagName?E=t.attributes.class?t.attributes.class.value:t.firstChild.tagName:(E="cubic",-1==t.firstChild.attributes.d.value.indexOf("C ")&&(E="quadratic"))),O=!1,jt(E),t.childNodes.length>1&&"g"==t.lastChild.tagName&&Y(t);var n=lt(t);t.appendChild(n),Dt(B,"setEditElement "+t.id+" "+t.attributes.class.value)}}function Y(t){var e=b?b.id:"null";Dt(B,"clearEditElement: svgInProgress="+O+", group="+t.id+", thisGroup="+e),"SHIFT"!=O&&(t?T?Dt(B,"clearEditElement: waitElement"):b&&e!=t.id?Dt(B,"clearEditElement: group conflict"):(t.childNodes.length>1&&("circle"==t.lastChild.tagName||"g"==t.lastChild.tagName?(t.lastChild.remove(),m=null,E="MOVE",jt(E),O=!1,h=null,b=null):"text"==t.firstChild.tagName&&"text"==O&&Ht()),W(t),E="MOVE",jt(E),O=!1,h=null,b=null):Dt(B,"clearEditElement: group argument null"))}function Q(t){return T?(Dt(B,"checkElementConflict1: waitElement = "+T),!0):O?"SHIFT"==O?(Dt(B,"checkElementConflict3: svgInProgress="+O+"thisGroup="+t.id),b.id!=t.id):O!=t.firstChild.tagName?(Dt(B,"checkElementConflict4: svgInProgress="+O+", thisElement="+h+", group element="+t.firstChild.tagName),!0):b!=t?(Dt(B,"checkElementConflict5: svgInProgress="+O+", thisGroup="+b.id+", group="+t.id+", group element="+t.firstChild.tagName),!0):void 0:(Dt(B,"checkElementConflict2: svgInProgress="+O+"thisGroup="+t.id),!1)}function X(t){null==t&&Dt(B,"fault");while(t.childElementCount>1&&"g"==t.lastChild.tagName)t.lastChild.remove();O=!1,m=null,Nt("MOVE"),W(t)}function tt(t){b||(b=t.parentNode.parentNode),h=b.firstChild,m=b.children[1].children["shift"],E=h.tagName,b.attributes.class&&(E=b.attributes.class.value);for(var e=b.lastChild.childElementCount,n=e;n>1;n--)b.lastChild.lastChild.remove();b.removeEventListener("mouseenter",q),b.removeEventListener("mouseleave",K),O="SHIFT",Dt(B,"svgInProgress = SHIFT, cursorMode = "+E)}function et(t){var e=t.parentNode.parentNode;if(b=e,h=e.firstChild,m=e.lastChild.firstChild,E=h.tagName,"circle"==E||"ellipse"==E)for(var n=e.lastChild.childElementCount,r=n;r>0;r--)e.lastChild.lastChild.remove();O="SIZE",Dt(B,"svgInProgress = SIZE, cursorMode = "+E+" "+h.tagName),e.removeEventListener("mouseenter",q),e.removeEventListener("mouseleave",K)}function nt(t){m=t;var e=t.parentNode.parentNode;b=e,h=e.firstChild,parseInt(t.id)==t.parentNode.childElementCount-1&&(m=t),"g"==t.parentNode.lastChild.tagName&&t.parentNode.lastChild.remove(),E=b.attributes.class?b.attributes.class.value:h.tagName,e.removeEventListener("mouseenter",q),e.removeEventListener("mouseleave",K),t.removeEventListener("mousedown",(function(t){})),O="POINT"}function rt(t){if(m==t);m=t;var e=t.parentNode.parentNode.parentNode;b=e,h=e.firstChild,parseInt(t.id)==t.parentNode.childElementCount-1&&(m=t),E=h.tagName,e.removeEventListener("mouseenter",q),e.removeEventListener("mouseleave",K),h.attributes["points"].value=it(h,m),m.id=(parseInt(m.id)+1).toString(),O="NEW"}function it(t,e){for(var n=t.attributes["points"].value.trim().split(" "),r="",i=parseInt(e.id),l=e.attributes["cx"].value+","+e.attributes["cy"].value,a=0;a<n.length;a++)r+=n[a]+" ",a==i&&(r+=l+" ");return r}function lt(t){var e,n,r,i,l,a={};t||Dt(B,"group arg null, thisGroup="+b);var u=t.firstChild;if(a=bt(u.tagName),"path"!=u.tagName)for(var o in a)a[o]=ft(u,o);var s=document.createElementNS("http://www.w3.org/2000/svg","g");switch(u.tagName){case"circle":var c=a["cx"],d=a["cy"],p=a["r"];return s.appendChild(at(c,d,"shift")),s.appendChild(ut(p+c,d,"E")),s.appendChild(ut(c,p+d,"S")),s.appendChild(ut(c-p,d,"W")),s.appendChild(ut(c,d-p,"N")),s;case"ellipse":c=a["cx"],d=a["cy"];var v=a["rx"],f=a["ry"];return s.appendChild(at(c,d,"shift")),s.appendChild(ut(c+.707*v,d+.707*f,"SE")),s.appendChild(ut(c+.707*v,d-.707*f,"NE")),s.appendChild(ut(c-.707*v,d-.707*f,"NW")),s.appendChild(ut(c-.707*v,d+.707*f,"SW")),s;case"rect":var h=a["x"],m=a["y"],g=a["width"],y=a["height"];return s.appendChild(at(h,m,"shift")),s.appendChild(ut(h+g,m+y)),s;case"line":var x=a["x1"],S=a["y1"],E=a["x2"],C=a["y2"];return s.appendChild(at((E+x)/2,(C+S)/2,"shift")),s.appendChild(ot(x,S,"x1-y1")),s.appendChild(ot(E,C,"x2-y2")),s;case"path":var N,w,A=u.attributes["d"].value,F=A.indexOf("Q ")>0,M=U(A);return F&&(M[6]=M[4],M[7]=M[5],M[4]=M[2],M[5]=M[3]),F?(N=parseFloat(M[0])+parseFloat(M[2])+parseFloat(M[6]),w=parseFloat(M[1])+parseFloat(M[3])+parseFloat(M[7]),N=(N/3).toFixed(3),w=(w/3).toFixed(3)):(N=parseFloat(M[0])+parseFloat(M[2])+parseFloat(M[4])+parseFloat(M[6]),w=parseFloat(M[1])+parseFloat(M[3])+parseFloat(M[5])+parseFloat(M[7]),N=(N/4).toFixed(3),w=(w/4).toFixed(3)),s.appendChild(pt(M)),s.appendChild(at(N,w,"shift")),s.appendChild(dt(M[0],M[1],M[2],M[3],"l1")),s.appendChild(dt(M[4],M[5],M[6],M[7],"l2")),s.appendChild(ct(M[0],M[1],"p1")),s.appendChild(ct(M[6],M[7],"p2")),s.appendChild(ct(M[2],M[3],"c1")),F||s.appendChild(ct(M[4],M[5],"c2")),s;case"polygon":case"polyline":var k=u.attributes["points"].value.trim();r=k.split(" ");var I=r[0].split(",");e=parseFloat(I[0]),n=parseFloat(I[1]);for(var P,L=0,H=0,T=0;T<r.length;T++)L+=e,H+=n,T<r.length-1&&(P=r[T+1].split(","),i=parseFloat(P[0]),l=parseFloat(P[1]),e=i,n=l);e=L/r.length,n=H/r.length,s.appendChild(at(e,n,"shift"));var O=document.createElementNS("http://www.w3.org/2000/svg","g");e=parseFloat(I[0]),n=parseFloat(I[1]);for(var V=0;V<r.length;V++)s.appendChild(ot(e,n,V.toString())),V<r.length-1&&(P=r[V+1].split(","),i=parseFloat(P[0]),l=parseFloat(P[1]),O.appendChild(st(.5*(e+i),.5*(n+l),V.toString()+".5")),e=i,n=l);if("polygon"==u.tagName){I=r[0].split(","),e=parseFloat(I[0]),n=parseFloat(I[1]);var _=(r.length-1).toString()+".5";O.appendChild(st(.5*(e+i),.5*(n+l),_))}return s.appendChild(O),s;case"text":return e=a["x"],n=a["y"],s.appendChild(at(e,n,"shift")),s}}function at(t,e,n){var r=vt(t,e);return r.setAttributeNS(null,"r",1.25*u),r.setAttributeNS(null,"stroke","#004477"),r.setAttributeNS(null,"fill-opacity","1.0"),r.addEventListener("mousedown",(function(t){tt(r)})),r.addEventListener("mouseup",(function(t){W(r)})),r.setAttributeNS(null,"style","cursor:move;"),r.setAttributeNS(null,"id",n),r}function ut(t,e,n){var r=vt(t,e);return r.setAttributeNS(null,"fill-opacity","0.6"),r.addEventListener("mousedown",(function(t){et(r)})),r.setAttributeNS(null,"id",n),r}function ot(t,e,n){var r=vt(t,e);return r.setAttributeNS(null,"fill-opacity","0.6"),r.setAttributeNS(null,"id",n),r.addEventListener("mousedown",(function(t){nt(r)})),r.addEventListener("mouseup",(function(t){X(b)})),r}function st(t,e,n){var r=vt(t,e);return r.setAttributeNS(null,"r",.8*u),r.setAttributeNS(null,"stroke","#555555"),r.setAttributeNS(null,"stroke-opacity","0.6"),r.setAttributeNS(null,"fill-opacity","0.4"),r.addEventListener("mousedown",(function(t){rt(r)})),r.addEventListener("mouseup",(function(t){X(b)})),r.setAttributeNS(null,"id",n),r}function ct(t,e,n){var r=vt(t,e);return r.setAttributeNS(null,"stroke","#333333"),r.setAttributeNS(null,"stroke-opacity","0.6"),r.setAttributeNS(null,"fill-opacity","0.8"),r.addEventListener("mousedown",(function(t){nt(r)})),r.addEventListener("mouseup",(function(t){X(t.target.parentElement.parentElement)})),r.setAttributeNS(null,"id",n),r}function dt(t,e,n,r,i){var l=$("line");return l.setAttributeNS(null,"x1",t),l.setAttributeNS(null,"y1",e),l.setAttributeNS(null,"x2",n),l.setAttributeNS(null,"y2",r),l.setAttributeNS(null,"id",i),l.setAttributeNS(null,"stroke-width","1"),l}function pt(t){var e=$("polyline");return e.setAttributeNS(null,"id","poly"),e.setAttributeNS(null,"points",z(t)),e.setAttributeNS(null,"stroke-opacity","0.0"),e}function vt(t,e){var n=$("circle");return isNaN(t)&&alert("offsetX: "+t.toString()),isNaN(e)&&alert("offsetY: "+e.toString()),n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r",u),n.setAttributeNS(null,"fill","#FFFFFF"),n.setAttributeNS(null,"stroke","#222222"),n.setAttributeNS(null,"stroke-width",.25*u),n}function ft(t,e){return parseFloat(parseFloat(t.attributes[e].value).toFixed(1))}function bt(t){var e=0,n=0,r=1,i=1;switch(t){case"polyline":return{points:r};case"polygon":return{points:r};case"rect":return{x:e,y:n,width:r,height:i};case"line":return{x1:e,y1:n,x2:r,y2:i};case"circle":return{cx:e,cy:n,r:r};case"ellipse":return{cx:e,cy:n,rx:r,ry:i};case"path":return{x1:e,y1:n,xc1:r,yc1:i,xc2:r,yc2:i,x2:e,y2:n};case"text":return{x:e,y:n}}}function ht(t){return!isNaN(parseFloat(t))&&isFinite(t)}function mt(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}j.prototype.onSvgMouseDown=function(){var t=this;return function(e){if(t.updateMousePosition(e),0!=O&&O!=E)return"SHIFT"==O?void 0:void(O=E);if(b&&b.childElementCount>1&&"text"!=E)return Y(b),!1;if("polygon"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var n=document.createElementNS("http://www.w3.org/2000/svg","g"),r="g"+document.getElementById("xlt").childElementCount.toString();n.setAttributeNS(null,"id",r),n.setAttributeNS(null,"class",E),b=n,document.getElementById("xlt").appendChild(n);var a=$("polyline");n.appendChild(a),h=n.children[0],a.setAttributeNS(null,"points",F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "+F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "),O=E}else{t.updateMousePosition(e);var u=h.attributes["points"].value,o=((g-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString()+" ";h.attributes["points"].value=u.concat(o)}if("polyline"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var s=document.createElementNS("http://www.w3.org/2000/svg","g");b=s;var c="g"+document.getElementById("xlt").childElementCount.toString();s.setAttributeNS(null,"id",c),s.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(s);var d=$("polyline");s.appendChild(d),h=s.children[0],d.setAttributeNS(null,"stroke-linecap","round"),d.setAttributeNS(null,"points",F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "+F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "),O=E}else{t.updateMousePosition(e);var p=h.attributes["points"].value,v=((g-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString()+" ";h.attributes["points"].value=p.concat(v)}if("rect"==E&&0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var f=document.createElementNS("http://www.w3.org/2000/svg","g"),m="g"+document.getElementById("xlt").childElementCount.toString();f.setAttributeNS(null,"id",m),f.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(f);var C=$("rect");f.appendChild(C),b=f,h=f.children[0],C.setAttributeNS(null,"x",F[0][0]),C.setAttributeNS(null,"y",F[0][1]),C.setAttributeNS(null,"width",1),C.setAttributeNS(null,"height",1),O=E}if("line"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var N=document.createElementNS("http://www.w3.org/2000/svg","g");b=N;var w="g"+document.getElementById("xlt").childElementCount.toString();N.setAttributeNS(null,"id",w),N.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(N);var A=$("line");N.appendChild(A),h=N.children[0],A.setAttributeNS(null,"x1",F[0][0]),A.setAttributeNS(null,"y1",F[0][1]),A.setAttributeNS(null,"x2",F[0][0]),A.setAttributeNS(null,"y2",F[0][1]),O=E}else O=!1,W(h);if("arrow"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var M=document.createElementNS("http://www.w3.org/2000/svg","g");b=M;var k="g"+document.getElementById("xlt").childElementCount.toString();M.setAttributeNS(null,"id",k),M.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(M);var I=$("line");M.appendChild(I),h=M.children[0],I.setAttributeNS(null,"x1",F[0][0]),I.setAttributeNS(null,"y1",F[0][1]),I.setAttributeNS(null,"x2",F[0][0]),I.setAttributeNS(null,"y2",F[0][1]),O=E}else O=!1,W(h);if("circle"==E&&0==O){null!=b&&Y(b),E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var H=document.createElementNS("http://www.w3.org/2000/svg","g"),B="g"+document.getElementById("xlt").childElementCount.toString();H.setAttributeNS(null,"id",B),H.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(H);var V=$(E);H.appendChild(V),b=H,h=H.children[0],V.setAttributeNS(null,"cx",F[0][0]),V.setAttributeNS(null,"cy",F[0][1]),V.setAttributeNS(null,"r",1),O=E}if("ellipse"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var _=document.createElementNS("http://www.w3.org/2000/svg","g");b=_;var j="g"+document.getElementById("xlt").childElementCount.toString();_.setAttributeNS(null,"id",j),_.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(_);var G=$("ellipse");_.appendChild(G),h=_.children[0],G.setAttributeNS(null,"cx",F[0][0]),G.setAttributeNS(null,"cy",F[0][1]),G.setAttributeNS(null,"rx",1),G.setAttributeNS(null,"ry",1),O=E}else O=!1,W(h);if("draw"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var D=document.createElementNS("http://www.w3.org/2000/svg","g");b=D;var U="g"+document.getElementById("xlt").childElementCount.toString();D.setAttributeNS(null,"id",U),D.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(D);var z=$("polyline");D.appendChild(z),h=D.children[0],z.setAttributeNS(null,"points",F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "),O=E}else O=!1,Z(h);if("cubic"==E||"quadratic"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var q=document.createElementNS("http://www.w3.org/2000/svg","g");b=q;var K="g"+document.getElementById("xlt").childElementCount.toString();q.setAttributeNS(null,"id",K),q.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(q);var J=$("path");q.appendChild(J),h=q.children[0];var Q=F[0][0],X=F[0][1];J.setAttributeNS(null,"d",R(Q,X,Q,X,Q,X,Q,X)),O=E}else O=!1,W(h);var tt;if("text"==E&&(h&&Ht(),0==O)){F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l],E,tt=document.createElementNS("http://www.w3.org/2000/svg","g"),b=tt;var et,nt="g"+document.getElementById("xlt").childElementCount.toString();tt.setAttributeNS(null,"id",nt),tt.setAttributeNS(null,"class",E),document.getElementById("xlt").appendChild(tt),et=document.createElementNS("http://www.w3.org/2000/svg","text"),tt.appendChild(et),h=tt.children[0],et.setAttributeNS(null,"stroke",i),et.setAttributeNS(null,"stroke-width","1"),et.setAttributeNS(null,"stroke-opacity","1.0"),et.setAttributeNS(null,"x",F[0][0]),et.setAttributeNS(null,"y",F[0][1]),et.setAttributeNS(null,"style","font-family: "+L+"; fill: "+i.toString()+";"),et.setAttributeNS(null,"font-size",P),et.innerHTML="_",O="text"}return"MOVE"==E&&0==O&&(O=E),T=!1,e.preventDefault()&&!1}},j.prototype.onSvgMouseMove=function(){var t=this;return function(e){return t.renderFunction(e),e.preventDefault(),!1}};function gt(t){var e=t.key,n=t.keyCode,r=(t.charCode,t.shiftKey);t.ctrlKey;if(20==n)return k=!k,!1;var i=V[n];return i?r&&_[i]?_[i]:i:n>47&&n<58?(e=String.fromCharCode(n),r?_[e]:e):(n>63&&n<91||32==n)&&(e=String.fromCharCode(n),k?M?e.toUpperCase():r?e.toLowerCase():e.toUpperCase():r?e:e.toLowerCase())}function yt(){O=!1,W(b),Nt("MOVE"),m=null,h=null,b=null}function xt(){if("polygon"==E||"polyline"==E){switch(O=!1,E){case"polygon":St(h),b.innerHTML=b.innerHTML.replace("polyline","polygon").replace("polyline","polygon"),W(b);break;case"polyline":St(h),W(b);break}"text"==E&&Ot(),h=null,b=null}}function St(t){var e=t.attributes["points"].value.trim(),n=e.split(" ");e=n[0]+" ";for(var r=1;r<n.length;r++)Ct(n[r-1],n[r])&&(e+=n[r]+" ");h.attributes["points"].value=e}function Et(t){var e=t.attributes["points"].value.trim(),n=e.split(" ");e=n[0]+" ";for(var r=1;r<n.length-1;r++)n[r]!=n[r-1]&&(e+=n[r]+" ");h.attributes["points"].value=e}function Ct(t,e){var n=t.split(","),r=e.split(","),i=n[0],l=n[1],a=r[0],u=r[1];return!(Math.abs(i-a)<1e-6*a&&Math.abs(l-u)<1e-6*u)}function Nt(t){h&&(wt(),Y(b)),"MOVE"==t.toUpperCase()?(E=t,Dt(B,"@setCursorMode1 cursorMode = "+E)):(E=t.toLowerCase(),"rectangle"==t&&(E="rect",Dt(B,"@setCursorMode2 cursorMode = "+E)),"clear"==t&&(At(),E="MOVE"),"reset"==t&&(It(0,0,o),E="MOVE")),"MOVE","MOVE"!=E.toUpperCase()&&(T=!0,Dt(B,"@setCursorMode3 waitElement = "+E)),jt(E),O=!1}function wt(){switch(E){case"polyline":case"polygon":break;case"circle":if(null==h)return;(h.attributes["cy"].value-h.attributes["r"].value<0||h.attributes["r"].value<2)&&At();break;case"ellipse":if(null==h)return;h.attributes["cy"].value-h.attributes["ry"].value<0&&At();break;case"rect":if(null==h)return;h.attributes["height"].value<0&&At();break;case"line":h.attributes["y2"].value<0&&At();break;case"text":Ht();break}}function At(){var t=document.getElementById("xlt");t.childElementCount>1&&t.lastChild.remove()}function Ft(t){t&&t.remove()}function Mt(){if(l<w){var t=l*(1+A);t>w&&(t=w),x=g-(g-x)*t/l,S=y-(y-S)*t/l,It(x,S,t),l=t,u=(N/l).toString(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}}function kt(){if(l>o/3){var t=l/(1+A);x=g-(g-x)*t/l,S=y-(y-S)*t/l,It(x,S,t),l=t,u=(N/l).toString(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}}function It(t,e,n){var r=document.getElementById("xlt"),i="translate("+t.toString()+", "+e.toString()+")scale("+n.toString()+")";l=n,x=t,S=e,r.attributes["transform"].value=i,document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}function Pt(t){v=t.key;var e,n=t.keyCode;if(v=gt(t),null==h)return 8==n&&t.preventDefault(),!1;if(13==t.keyCode&&t.shiftKey)return Ht(),!1;if(e=I.slice(0,I.length-1),n>31&&(I=e+v+"_"),8==n&&(I=e.slice(0,e.length-1)+"_",t.preventDefault()),v||13==n||8==n){h.innerHTML=Lt(I),h.attributes["stroke"].value=i,h.attributes["style"].value="font-family: "+L+"; fill: "+i+";",h.attributes["font-size"].value=P;var r=h.attributes["x"].value,l=parseInt(h.attributes["y"].value)+parseInt(P),a=h.cloneNode();13==t.keyCode&&(h.innerHTML=Lt(e.slice(0,e.length)),a.attributes["x"].value=r,a.attributes["y"].value=l,h.parentElement.appendChild(a),h=a,h.innerHTML="_",I="_",t.preventDefault())}}function Lt(t){var e=t.replace(/  /g," &nbsp;");return e=e.replace(/</g,"&lt;").replace(/>/g,"&gt"),e}function Ht(){if(Tt(),b){if(b.hasChildNodes())W(b);else{b.remove()}Ot(),b=null}}function Tt(){if(h&&h.parentElement)if("_"==h.parentElement.lastChild.innerHTML)h.parentElement.lastChild.remove(),I="_",h=null;else if("text"==O){if(h.innerHTML=Lt(I.slice(0,I.length-1)),""==h.innerHTML){h.remove(),h=null}if("g"==b.lastChild.tagName){b.lastChild.remove}}}function Ot(){I="_",F=[],h=null,O=!1}function Bt(t){i=t,document.getElementById("cursorColor").attributes["style"].value="background-color: "+i}function Vt(t){var e=document.getElementById("selectUserColor");e.attributes["style"].value="background-color: "+t,e.blur()}function _t(){return document.getElementById("userColor").value}function jt(t){var e=t;"rect"==t&&(e="rectangle"),document.getElementById("mode").textContent=e.toUpperCase(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}function Gt(t){var e,n,r=s.cloneNode(!0),i=r.firstChild;t||(r.removeAttribute("height"),r.removeAttribute("width"),r.firstChild.attributes["transform"].value="translate(0, 0)scale(1)",i.children["xltImage"].remove());var l,a,u=i.childElementCount,o=1;for(l=1;l<u;l++)n=i.childNodes[o],o++,t||(n.attributes.class?n.removeAttribute("id"):(o--,a=n.childElementCount,e=i.children[o].innerHTML,i.children[o].outerHTML=e,o+=a));return t||(e=i.firstChild.outerHTML.replace("<image","\x3c!--image").replace("/image>","/image--\x3e"),i.firstChild.outerHTML=e),r}function Dt(t,e){return!!t&&(console.log(e),!0)}function Rt(){P=document.getElementById("textHeight").value}j.prototype.updateMousePosition=function(t){var e;e=this.touchSupported?t.originalEvent.touches[0]:t;var n=d;this.lastMousePoint.x=e.pageX-n.left,this.lastMousePoint.y=e.pageY-n.top,g=this.lastMousePoint.x,y=this.lastMousePoint.y},j.prototype.updateSvgByElement=function(t){if("MOVE"!=E){if("polygon"==E||"polyline"==E&&"polygon"==O){if(0==O)return;if(this.updateMousePosition(t),"SHIFT"==O){((g-x)/l).toFixed(3).toString(),((y-S)/l).toFixed(3).toString();var e=h.attributes["points"].value.trim(),n=e.split(" ");if(null!=m){var r=parseFloat(m.attributes["cx"].value),i=parseFloat(m.attributes["cy"].value),a=(g-x)/l,u=(y-S)/l,o=a-r,s=u-i;m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l;var c,d="",p=[],v=[];for(c=0;c<n.length;c++){var f=n[c].split(",");p[c]=(parseFloat(f[0])+o).toFixed(3),v[c]=(parseFloat(f[1])+s).toFixed(3),d+=p[c]+","+v[c]+" "}for(var C=0;C<n.length;C++)e+=n[C]+" ";h.attributes["points"].value=d}}else{var N=((g-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString(),w=h.attributes["points"].value.trim(),A=w.split(" ");if(null!=m){if(m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l,ht(m.id)){A[parseInt(m.id)]=N,w="";for(var F=0;F<A.length;F++)w+=A[F]+" ";h.attributes["points"].value=w}}else{w="";for(var M=0;M<A.length-1;M++)w+=A[M]+" ";N+=" ",h.attributes["points"].value=w.concat(N)}}}else if("polyline"==E){if(0==O)return;if(this.updateMousePosition(t),"SHIFT"==O){((g-x)/l).toFixed(3).toString(),((y-S)/l).toFixed(3).toString();var k=h.attributes["points"].value.trim(),I=k.split(" ");if(null!=m){var L=parseFloat(m.attributes["cx"].value),T=parseFloat(m.attributes["cy"].value),V=(g-x)/l,_=(y-S)/l,j=V-L,Z=_-T;m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l;var q,K="",W=[],J=[];for(q=0;q<I.length;q++){var Y=I[q].split(",");W[q]=(parseFloat(Y[0])+j).toFixed(3),J[q]=(parseFloat(Y[1])+Z).toFixed(3),K+=W[q]+","+J[q]+" "}for(var Q=0;Q<I.length;Q++)k+=I[Q]+" ";h.attributes["points"].value=K}}else{var X=((g-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString(),tt=h.attributes["points"].value.trim(),et=tt.split(" ");if(null!=m){if(m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l,ht(m.id)){et[parseInt(m.id)]=X,tt="";for(var nt=0;nt<et.length;nt++)tt+=et[nt]+" ";h.attributes["points"].value=tt}}else{tt="";for(var rt=0;rt<et.length-1;rt++)tt+=et[rt]+" ";X+=" ",h.attributes["points"].value=tt.concat(X)}}}else if("rect"==E){if(0==O)return;if("SHIFT"==O)this.updateMousePosition(t),m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l,h.attributes["x"].value=(g-x)/l,h.attributes["y"].value=(y-S)/l;else{var it=h.attributes["x"].value,lt=h.attributes["y"].value;this.updateMousePosition(t),h.attributes["width"].value=(g-x)/l-it,h.attributes["height"].value=(y-S)/l-lt,m&&(m=t.target,m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l)}}else if("line"==E){var at;if(g=this.lastMousePoint.x,y=this.lastMousePoint.y,"mousedown"==t.type||0==O)return void Dt(B,"cursorMode=line abort event:"+t.type+" svgInProgress= "+O);if("SHIFT"==O){this.updateMousePosition(t);var ut=parseFloat(h.attributes["x1"].value),ot=parseFloat(h.attributes["y1"].value),st=parseFloat(h.attributes["x2"].value),ct=parseFloat(h.attributes["y2"].value),dt=parseFloat(m.attributes["cx"].value),pt=parseFloat(m.attributes["cy"].value),vt=(g-x)/l,ft=(y-S)/l,bt=dt-vt,gt=ft-pt;m&&(m.attributes["cx"].value=vt,m.attributes["cy"].value=ft,h.attributes["x1"].value=ut-bt,h.attributes["y1"].value=gt+ot,h.attributes["x2"].value=st-bt,h.attributes["y2"].value=gt+ct)}else this.updateMousePosition(t),at=["x2","y2"],null!=m&&(m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l,ht(m.id)||(at=m.id.split("-")),"shift"==b.lastChild.firstChild.id&&b.lastChild.firstChild.remove()),h.attributes[at[0]].value=(g-x)/l,h.attributes[at[1]].value=(y-S)/l,Dt(B,"x: "+((g-x)/l).toString()+" / y: "+((y-S)/l).toString())}else if("arrow"==E){var yt;if(g=this.lastMousePoint.x,y=this.lastMousePoint.y,"mousedown"==t.type||0==O)return;var xt=b.children[0];if(this.updateMousePosition(t),"SHIFT"==O){var St=parseFloat(xt.attributes["x1"].value),Et=parseFloat(xt.attributes["y1"].value),Ct=parseFloat(xt.attributes["x2"].value),Nt=parseFloat(xt.attributes["y2"].value);m||(m=xt.parentElement.lastChild.children["shift"]);var wt=parseFloat(m.attributes["cx"].value),At=parseFloat(m.attributes["cy"].value),Ft=(g-x)/l,Mt=(y-S)/l,kt=wt-Ft,Pt=Mt-At;m.attributes["cx"].value=Ft,m.attributes["cy"].value=Mt,xt.attributes["x1"].value=St-kt,xt.attributes["y1"].value=Pt+Et,xt.attributes["x2"].value=Ct-kt,xt.attributes["y2"].value=Pt+Nt}else yt=["x2","y2"],null!=m&&(m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l,ht(m.id)||(yt=m.id.split("-"))),xt.attributes[yt[0]].value=(g-x)/l,xt.attributes[yt[1]].value=(y-S)/l;while(b.childElementCount>1)b.lastChild.remove();var Lt=h.attributes["x1"].value,Ht=h.attributes["y1"].value,Tt=h.attributes["x2"].value,Ot=h.attributes["y2"].value,Bt=h.attributes["stroke"].value,Vt=Tt-Lt,_t=Ot-Ht,jt=Math.sqrt(Vt*Vt+_t*_t);0==jt&&(jt=1);var Gt,Rt=Vt/jt,Ut=_t/jt;Gt=document.getElementById("arrowHeadPixels").checked?document.getElementById("arrowHeadLength").value:jt*H/100;var zt=parseFloat(Tt)-Rt*Gt,$t=parseFloat(Ot)-Ut*Gt,Zt=(zt+Gt*Ut/2).toFixed(3),qt=($t-Gt*Rt/2).toFixed(3),Kt=(zt-Gt*Ut/2).toFixed(3),Wt=($t+Gt*Rt/2).toFixed(3),Jt=$("line");Jt.setAttributeNS(null,"x1",Tt),Jt.setAttributeNS(null,"y1",Ot),Jt.setAttributeNS(null,"x2",Zt),Jt.setAttributeNS(null,"y2",qt),Jt.setAttributeNS(null,"stroke",Bt);var Yt=$("line");if(Yt.setAttributeNS(null,"x1",Tt),Yt.setAttributeNS(null,"y1",Ot),Yt.setAttributeNS(null,"x2",Kt),Yt.setAttributeNS(null,"y2",Wt),Yt.setAttributeNS(null,"stroke",Bt),document.getElementById("arrowHeadClosed").checked){var Qt=$("polygon"),Xt=Tt+","+Ot+" "+Zt+","+qt+" "+Kt+","+Wt;Qt.setAttributeNS(null,"points",Xt),Qt.setAttributeNS(null,"stroke",Bt),b.appendChild(Qt)}else b.appendChild(Jt),b.appendChild(Yt)}else if("circle"==E){if("mousedown"==t.type||0==O)return;if("SHIFT"==O)this.updateMousePosition(t),m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l,h.attributes["cx"].value=(g-x)/l,h.attributes["cy"].value=(y-S)/l;else{var te=h.attributes["cx"].value,ee=h.attributes["cy"].value;this.updateMousePosition(t),g=this.lastMousePoint.x,y=this.lastMousePoint.y;var ne=mt(te,ee,(g-x)/l,(y-S)/l);if(h.attributes["r"].value=ne,m)switch(m=t.target,m.id){case"E":m.attributes["cx"].value=parseFloat(te)+ne;break;case"S":m.attributes["cy"].value=parseFloat(ee)+ne;break;case"W":m.attributes["cx"].value=parseFloat(te)-ne;break;case"N":m.attributes["cy"].value=parseFloat(ee)-ne;break}var re=t.target.parentElement.children;re["E"]&&(re["E"].attributes["cx"].value=parseFloat(te)+ne,re["S"].attributes["cy"].value=parseFloat(ee)+ne,re["W"].attributes["cx"].value=parseFloat(te)-ne,re["N"].attributes["cy"].value=parseFloat(ee)-ne)}}else if("ellipse"==E){if(g=this.lastMousePoint.x,y=this.lastMousePoint.y,"mousedown"==t.type||0==O)return;if("SHIFT"==O)this.updateMousePosition(t),m.attributes["cx"].value=(g-x)/l,m.attributes["cy"].value=(y-S)/l,h.attributes["cx"].value=(g-x)/l,h.attributes["cy"].value=(y-S)/l;else{var ie=h.attributes["cx"].value,le=h.attributes["cy"].value;this.updateMousePosition(t),g=this.lastMousePoint.x,y=this.lastMousePoint.y,h.attributes["rx"].value=1.414*Math.abs(ie-(g-x)/l),h.attributes["ry"].value=1.414*Math.abs(le-(y-S)/l)}}else if("draw"==E){if(0==O)return;this.updateMousePosition(t);var ae=h.attributes["points"].value,ue=((g-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString()+" ";h.attributes["points"].value=ae.concat(ue)}else if("cubic"==E||"quadratic"==E){if(g=this.lastMousePoint.x,y=this.lastMousePoint.y,"mousedown"==t.type||0==O)return;this.updateMousePosition(t);var oe=h.attributes["d"].value,se=oe.indexOf("Q ")>0;if(null!=m){var ce=(g-x)/l,de=(y-S)/l,pe=parseFloat(m.attributes["cx"].value),ve=parseFloat(m.attributes["cy"].value);Dt(B,"endpoints: ["+ce+", "+de+"], ["+pe+", "+ve+"]");var fe=ce-pe,be=de-ve;m.attributes["cx"].value=ce,m.attributes["cy"].value=de;var he=U(oe);if("shift"==m.id){Dt(B,oe),Dt(B,"dx: "+fe+", dy: "+be);for(var me=0;me<he.length;me++)he[me]=(fe+parseFloat(he[me])).toFixed(3),he[me+1]=(be+parseFloat(he[me+1])).toFixed(3),me++;se&&(he[6]=he[4],he[7]=he[5]),h.attributes["d"].value=R(he[0],he[1],he[2],he[3],he[4],he[5],he[6],he[7]),Dt(B,h.attributes["d"].value)}else{switch(se&&(he[6]=he[4],he[7]=he[5]),m.id){case"p1":he[0]=ce.toFixed(3),he[1]=de.toFixed(3);break;case"p2":he[6]=ce.toFixed(3),he[7]=de.toFixed(3);break;case"c1":he[2]=ce.toFixed(3),he[3]=de.toFixed(3);break;case"c2":he[4]=ce.toFixed(3),he[5]=de.toFixed(3);break}se&&(he[4]=he[2],he[5]=he[3]),h.attributes["d"].value=R(he[0],he[1],he[2],he[3],he[4],he[5],he[6],he[7]),h.parentElement.lastChild.children["l1"].attributes["x1"].value=he[0],h.parentElement.lastChild.children["l1"].attributes["y1"].value=he[1],h.parentElement.lastChild.children["l1"].attributes["x2"].value=he[2],h.parentElement.lastChild.children["l1"].attributes["y2"].value=he[3],h.parentElement.lastChild.children["l2"].attributes["x1"].value=he[4],h.parentElement.lastChild.children["l2"].attributes["y1"].value=he[5],h.parentElement.lastChild.children["l2"].attributes["x2"].value=he[6],h.parentElement.lastChild.children["l2"].attributes["y2"].value=he[7],h.parentElement.lastChild.children["poly"].attributes["points"].value=z(he)+he[0]+", "+he[1]}}else{var ge,ye=(g-x)/l,xe=(y-S)/l,Se=" C ";"quadratic"==E&&(Se=" Q ");var Ee=oe.split(Se),Ce=Ee[0].split("M ");Ce=Ce[1].split(", ");var Ne=parseInt(Ce[0]),we=parseInt(Ce[1]),Ae=Ne-ye,Fe=we-xe,Me=Ee[1].split(", ");" Q "==Se?(Me[0]=(Ne-.4*Ae).toFixed(3),Me[1]=(we-.4*Fe).toFixed(3),ge=Ee[0]+Se+D(Me[0],Me[1])):(Me[0]=(Ne-.4*Ae).toFixed(3),Me[1]=(we-.4*Fe).toFixed(3),Me[2]=(Ne-.6*Ae).toFixed(3),Me[3]=(we-.6*Fe).toFixed(3),ge=Ee[0]+Se+D(Me[0],Me[1]),ge+=D(Me[2],Me[3]),ge+=D(ye,xe),Dt(B,"p1: "+Ce[0]+", "+Ce[1]),Dt(B,"control points: "+Me[0]+", "+Me[1]+" ... "+Me[2]+", "+Me[3]),Dt(B,"p2: "+ye+", "+xe)),ge+=G(ye,xe),h.attributes["d"].value=ge}}else if("text"==E&&"SHIFT"==O){this.updateMousePosition(t),m||(m=t.target);var ke=(g-x)/l,Ie=(y-S)/l;m.attributes["cx"].value=ke,m.attributes["cy"].value=Ie;for(var Pe=0;Pe<b.children.length;Pe++)"text"==b.children[Pe].tagName?(b.children[Pe].attributes["x"].value=ke,b.children[Pe].attributes["y"].value=Ie+Pe*P):(b.children[Pe].children[0].attributes["cx"].value=ke,b.children[Pe].children[0].attributes["cy"].value=Ie)}}else if("MOVE"==E&&"MOVE"==O){var Le=this.lastMousePoint.x,He=this.lastMousePoint.y;this.updateMousePosition(t),x-=Le-g,S-=He-y,It(x,S,l)}return t.preventDefault()&&!1},j.prototype.onSvgMouseUp=function(t){return function(t){return O?("SHIFT"==O?(O=!1,Y(b)):"SIZE"==O?(O=!1,W(h.parentNode)):"bubble"==E?O=!1:"draw"==E?(O=!1,W(b)):"cubic"==E||"quadratic"==E?(O=!1,W(b)):"MOVE"==E?O=!1:"rect"==E?(O=!1,W(b),m=null,h=null,b=null):"line"==E?(O=!1,W(b),m=null,h=null,b=null):"arrow"==E?(O=!1,W(b),m=null,h=null,b=null):"polygon"==E?null==m||(O=!1,W(b),m=null,h=null,b=null):"polyline"==E?null==m||(O=!1,W(b),m=null,h=null,b=null):"circle"==E?(O=!1,W(b),m=null,h=null,b=null):"ellipse"==E?(O=!1,W(b),m=null,h=null,b=null):"text"==E&&0==O&&("circle"==b.lastChild.tagName&&Y(group),W(b)),F=[],!1):t.preventDefault()&&!1}},j.prototype.keyUpHandler=function(){return function(t){20==t.keyCode&&(k=!k)}},j.prototype.keyHandler=function(){return function(t){var e=t.keyCode,n=document.activeElement;switch(e){case 16:return v="Shift",f,void(f=v);case 20:return void(k=!k);case 93:return v="Meta",f,void(f=v);case 82:t.shiftKey&&(t.ctrlKey||t.metaKey)&&location.reload(!0);case 66:if(t.ctrlKey&&b){var r=b.cloneNode(!0);b.remove(),Y(r),s.firstChild.insertBefore(r,s.firstChild.childNodes[1])}case 84:if(t.ctrlKey&&b){var i=b.cloneNode(!0);b.remove(),Y(i),s.firstChild.appendChild(i)}default:null,f=v}if("text"!=E||"BODY"!=n.tagName&&n.id!=s.parentElement.id){if("Enter"==t.key||13==e)switch(E){case"polygon":return void xt();case"polyline":return void xt();case"line":return void yt();case"rectangle":return void yt();case"circle":return void yt();case"ellipse":return void yt();case"cubic":return void yt();case"quadratic":return void yt();case"draw":return void yt()}if("Delete"==t.key||"Backspace"==t.key||46==e||8==e){if(t.shiftKey)return Ft(b),O=!1,void Nt("MOVE");if("BODY"==n.tagName||n.id==s.parentElement.id)return void t.preventDefault()}if("Escape"!=t.key&&27!=e);else switch(E){case"polyline":if(O==E)return void Et(h)}}else Pt(t)}},j.prototype.doubleClickHandler=function(){return function(){xt()}},j.prototype.mouseWheelScrollHandler=function(){return function(t){t.stopImmediatePropagation(),t.stopPropagation();var e=1e3;"DOMMouseScroll"==t.type&&(e=100);var n=-parseInt(t.deltaY||-t.detail);g=t.clientX-d.left,y=t.clientY-d.top;var r=n/e;return r>0?Mt():kt(),t.preventDefault()&&!1}},j.prototype.setMode=function(t){Nt(t)},j.prototype.showSVG=function(t){p.children["textSVGorJSON"].textContent=Gt(t).outerHTML},j.prototype.jsonSVG=function(t){var e=Gt(!1).firstChild;e.removeAttribute("id"),e.removeAttribute("transform");var n={data:{type:"svg",attributes:e.outerHTML}};return p.children["textSVGorJSON"].textContent=JSON.stringify(n),n},j.prototype.buildSVGmenu=function(t){t.attributes["data-buttons"]&&function(){var e,n,r,l=JSON.parse(t.attributes["data-buttons"].value).buttons;for(p=document.createElement("div"),p.setAttribute("id","svgMenu"),t.parentElement.appendChild(p),r=0;r<l.length;r++){var a=l[r].function,u=l[r].value;(function(){switch(a){case"clear":case"polygon":case"polyline":case"line":case"arrow":case"rectangle":case"circle":case"ellipse":case"quadratic":case"cubic":case"draw":case"text":case"MOVE":case"reset":e=document.createElement("input"),e.setAttribute("type","button"),u?e.setAttribute("value",u):e.setAttribute("value",l[r].function.charAt(0).toUpperCase()+l[r].function.slice(1)),e.setAttribute("id","b_"+l[r].function.toLowerCase()),p.appendChild(e);var t=l[r].function;e.addEventListener("click",(function(e){Nt(t)}));break;case"mode":n=document.createElement("span"),n.setAttribute("id","mode"),p.appendChild(n);break;case"zoomin":e=document.createElement("input"),e.setAttribute("type","button"),e.setAttribute("value","Zoom IN"),e.setAttribute("id","b_zoomin"),p.appendChild(e),e.addEventListener("click",(function(t){e.blur(),Mt()}));break;case"zoom":e=document.createElement("span"),e.setAttribute("id","zoom"),e.setAttribute("innerHTML"," Zoom:  ----"),p.appendChild(e);break;case"zoomout":e=document.createElement("input"),e.setAttribute("type","button"),e.setAttribute("value","Zoom OUT"),e.setAttribute("id","b_zoomout"),p.appendChild(e),e.addEventListener("click",(function(t){e.blur(),kt()}));break;case"textheight":n=document.createElement("span"),n.setAttribute("id","textBlock"),p.appendChild(n);var o=document.createElement("span");o.innerHTML=" Text Size: ",n.appendChild(o),e=document.createElement("input"),e.setAttribute("id","textHeight"),e.setAttribute("type","number"),e.setAttribute("min","5"),e.setAttribute("step","5"),e.setAttribute("max","300"),e.setAttribute("style","width: 4em"),e.setAttribute("value","75"),n.appendChild(e),e.addEventListener("change",(function(t){Rt()}));break;case"newline":p.appendChild(document.createElement("br")),n=document.createElement("span"),n.innerHTML="Select color: ",p.appendChild(n);break;case"colorselect":var s={buttons:[{color:"#FF0000"},{color:"#00FF00"},{color:"#0000FF"},{color:"#000000"},{color:"#666666"},{color:"#FF0000"}]},c=void 0;for(c=0;c<s.buttons.length;c++)if(4==c&&(e=document.createElement("input"),e.setAttribute("id","userColor"),e.setAttribute("type","text"),e.setAttribute("value",s.buttons[c].color),e.setAttribute("style","width: 5em"),p.appendChild(e),e.addEventListener("change",(function(t){Vt(_t()),e.blur()})),e=document.createElement("input"),e.setAttribute("id","selectUserColor"),e.setAttribute("type","button"),e.setAttribute("style","background-color: "+s.buttons[c].color),p.appendChild(e),e.addEventListener("click",(function(t){Bt(_t()),e.blur()}))),c<s.buttons.length-2&&function(){e=document.createElement("input"),e.setAttribute("type","button"),e.setAttribute("style","background-color: "+s.buttons[c].color),p.appendChild(e);var t=s.buttons[c].color;e.addEventListener("click",(function(n){Bt(t),e.blur()}))}(),c>s.buttons.length-2){var d=document.createElement("span");d.innerHTML=" Selected Color >",p.appendChild(d),e=document.createElement("input"),e.setAttribute("id","cursorColor"),e.setAttribute("type","button"),e.setAttribute("style","background-color: "+s.buttons[c].color),p.appendChild(e),i=s.buttons[c].color}break;case"arrowspecs":n=document.createElement("span"),n.setAttribute("id","arrowBlock"),n.innerHTML+=" &nbsp;Arrowhead: Closed:",e=document.createElement("input"),e.setAttribute("id","arrowHeadClosed"),e.setAttribute("type","checkbox"),n.appendChild(e),e.addEventListener("click",(function(t){document.getElementById("arrowHeadClosed").checked})),n.innerHTML+=" &nbsp; Fixed:",e=document.createElement("input"),e.setAttribute("id","arrowHeadPixels"),e.setAttribute("type","checkbox"),n.appendChild(e),e.addEventListener("click",(function(t){document.getElementById("arrowHeadPixels").checked})),n.innerHTML+=" &nbsp; Length:",e=document.createElement("input"),e.setAttribute("id","arrowHeadLength"),e.setAttribute("type","number"),e.setAttribute("value","50"),e.setAttribute("style","width: 4em"),n.appendChild(e),e.addEventListener("change",(function(t){j.prototype.apiArrowLength()})),n.innerHTML+=" &nbsp; Percent:",e=document.createElement("input"),e.setAttribute("id","arrowHeadPercent"),e.setAttribute("type","number"),e.setAttribute("min","5"),e.setAttribute("step","1"),e.setAttribute("max","30"),e.setAttribute("style","width: 4em"),e.setAttribute("value","10"),n.appendChild(e),n.addEventListener("change",(function(t){e.blur(),H=parseFloat(document.getElementById("arrowHeadPercent").value)})),p.appendChild(n);break;case"json":e=document.createElement("input"),e.setAttribute("id","saveSVG"),e.setAttribute("type","button"),e.setAttribute("value","Extract SVG"),p.appendChild(e),e.addEventListener("click",(function(t){e.blur(),j.prototype.showSVG(!0)})),e=document.createElement("input"),e.setAttribute("id","plainSVG"),e.setAttribute("type","button"),e.setAttribute("value","Plain SVG"),p.appendChild(e),e.addEventListener("click",(function(t){e.blur(),j.prototype.showSVG(!1)})),e=document.createElement("input"),e.setAttribute("id","svgJSON"),e.setAttribute("type","button"),e.setAttribute("value","JSON SVG"),p.appendChild(e),e.addEventListener("click",(function(t){j.prototype.jsonSVG(!1)})),p.appendChild(document.createElement("br"));var v=document.createElement("textarea");v.setAttribute("id","textSVGorJSON"),p.appendChild(v);break}})()}}()},j.prototype.apiTextHeight=function(t){ht(t)&&(P=t)},j.prototype.apiArrowClosed=function(t){t},j.prototype.apiArrowFixed=function(t){t},j.prototype.apiArrowLength=function(t){t?ht(t)&&t:parseFloat(document.getElementById("arrowHeadLemgth").value)},j.prototype.apiArrowPercent=function(t){ht(t)&&(H=t)};var Ut=j,zt=(new Ut(document.getElementById("container")),document.getElementById("container")),$t=document.getElementById("image_file");function Zt(t){var e=t.target.files,n=zt.children[0];n&&n.parentNode.removeChild(n);var r=document.getElementById("svgMenu");if(r&&r.parentNode.removeChild(r),FileReader&&e&&e.length){var i=new FileReader;i.onload=function(t){zt.attributes["data-image"].value=i.result,new Ut(zt)},i.readAsDataURL(e[0])}}$t.addEventListener("change",(function(t){Zt(t)}))},fdef:function(t,e){t.exports="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff"}})}));
//# sourceMappingURL=svg-detailer.umd.min.js.map