(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["../demo/svg-detailer"]=e():t["../demo/svg-detailer"]=e()})("undefined"!==typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fae3")}({"02f4":function(t,e,n){var r=n("4588"),i=n("be13");t.exports=function(t){return function(e,n){var l,o,u=String(i(e)),a=r(n),s=u.length;return a<0||a>=s?t?"":void 0:(l=u.charCodeAt(a),l<55296||l>56319||a+1===s||(o=u.charCodeAt(a+1))<56320||o>57343?t?u.charAt(a):l:t?u.slice(a,a+2):o-56320+(l-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),l=n("79e5"),o=n("be13"),u=n("2b4c"),a=n("520a"),s=u("species"),c=!l(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=u(t),v=!l(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),f=v?!l(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[s]=function(){return n}),n[p](""),!e}):void 0;if(!v||!f||"replace"===t&&!c||"split"===t&&!d){var b=/./[p],h=n(o,p,""[t],function(t,e,n,r,i){return e.exec===a?v&&!i?{done:!0,value:b.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),g=h[0],m=h[1];r(String.prototype,t,g),i(RegExp.prototype,p,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},"230e":function(t,e,n){var r=n("d3f4"),i=n("7726").document,l=r(i)&&r(i.createElement);t.exports=function(t){return l?i.createElement(t):{}}},"23c6":function(t,e,n){var r=n("2d95"),i=n("2b4c")("toStringTag"),l="Arguments"==r(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),i))?n:l?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},"28a5":function(t,e,n){"use strict";var r=n("aae3"),i=n("cb7c"),l=n("ebd6"),o=n("0390"),u=n("9def"),a=n("5f1b"),s=n("520a"),c=n("79e5"),d=Math.min,p=[].push,v="split",f="length",b="lastIndex",h=4294967295,g=!c(function(){RegExp(h,"y")});n("214f")("split",2,function(t,e,n,c){var m;return m="c"=="abbc"[v](/(b)*/)[1]||4!="test"[v](/(?:)/,-1)[f]||2!="ab"[v](/(?:ab)*/)[f]||4!="."[v](/(.?)(.?)/)[f]||"."[v](/()()/)[f]>1||""[v](/.?/)[f]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);var l,o,u,a=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=void 0===e?h:e>>>0,g=new RegExp(t.source,c+"g");while(l=s.call(g,i)){if(o=g[b],o>d&&(a.push(i.slice(d,l.index)),l[f]>1&&l.index<i[f]&&p.apply(a,l.slice(1)),u=l[0][f],d=o,a[f]>=v))break;g[b]===l.index&&g[b]++}return d===i[f]?!u&&g.test("")||a.push(""):a.push(i.slice(d)),a[f]>v?a.slice(0,v):a}:"0"[v](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),l=void 0==n?void 0:n[e];return void 0!==l?l.call(n,i,r):m.call(String(i),n,r)},function(t,e){var r=c(m,t,this,e,m!==n);if(r.done)return r.value;var s=i(t),p=String(this),v=l(s,RegExp),f=s.unicode,b=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(g?"y":"g"),y=new v(g?s:"^(?:"+s.source+")",b),x=void 0===e?h:e>>>0;if(0===x)return[];if(0===p.length)return null===a(y,p)?[p]:[];var S=0,E=0,C=[];while(E<p.length){y.lastIndex=g?E:0;var N,A=a(y,g?p:p.slice(E));if(null===A||(N=d(u(y.lastIndex+(g?0:E)),p.length))===S)E=o(p,E,f);else{if(C.push(p.slice(S,E)),C.length===x)return C;for(var w=1;w<=A.length-1;w++)if(C.push(A[w]),C.length===x)return C;E=S=N}}return C.push(p.slice(S)),C}]})},"2aba":function(t,e,n){var r=n("7726"),i=n("32e9"),l=n("69a8"),o=n("ca5a")("src"),u=n("fa5b"),a="toString",s=(""+u).split(a);n("8378").inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,u){var a="function"==typeof n;a&&(l(n,"name")||i(n,"name",e)),t[e]!==n&&(a&&(l(n,o)||i(n,o,t[e]?""+t[e]:s.join(String(e)))),t===r?t[e]=n:u?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[o]||u.call(this)})},"2b4c":function(t,e,n){var r=n("5537")("wks"),i=n("ca5a"),l=n("7726").Symbol,o="function"==typeof l,u=t.exports=function(t){return r[t]||(r[t]=o&&l[t]||(o?l:i)("Symbol."+t))};u.store=r},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},"32e9":function(t,e,n){var r=n("86cc"),i=n("4630");t.exports=n("9e1e")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},4588:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},"4f37":function(t,e,n){"use strict";n("aa77")("trim",function(t){return function(){return t(this,3)}})},"520a":function(t,e,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,l=String.prototype.replace,o=i,u="lastIndex",a=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[u]||0!==e[u]}(),s=void 0!==/()??/.exec("")[1],c=a||s;c&&(o=function(t){var e,n,o,c,d=this;return s&&(n=new RegExp("^"+d.source+"$(?!\\s)",r.call(d))),a&&(e=d[u]),o=i.call(d,t),a&&o&&(d[u]=d.global?o.index+o[0].length:e),s&&o&&o.length>1&&l.call(o[0],n,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(o[c]=void 0)}),o}),t.exports=o},5537:function(t,e,n){var r=n("8378"),i=n("7726"),l="__core-js_shared__",o=i[l]||(i[l]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"57e7":function(t,e,n){"use strict";var r=n("5ca1"),i=n("c366")(!1),l=[].indexOf,o=!!l&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(o||!n("2f21")(l)),"Array",{indexOf:function(t){return o?l.apply(this,arguments)||0:i(this,t,arguments[1])}})},"5ca1":function(t,e,n){var r=n("7726"),i=n("8378"),l=n("32e9"),o=n("2aba"),u=n("9b43"),a="prototype",s=function(t,e,n){var c,d,p,v,f=t&s.F,b=t&s.G,h=t&s.S,g=t&s.P,m=t&s.B,y=b?r:h?r[e]||(r[e]={}):(r[e]||{})[a],x=b?i:i[e]||(i[e]={}),S=x[a]||(x[a]={});for(c in b&&(n=e),n)d=!f&&y&&void 0!==y[c],p=(d?y:n)[c],v=m&&d?u(p,r):g&&"function"==typeof p?u(Function.call,p):p,y&&o(y,c,p,t&s.U),x[c]!=p&&l(x,c,v),g&&S[c]!=p&&(S[c]=p)};r.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var l=n.call(t,e);if("object"!==typeof l)throw new TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"626a":function(t,e,n){var r=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},6821:function(t,e,n){var r=n("626a"),i=n("be13");t.exports=function(t){return r(i(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"6b54":function(t,e,n){"use strict";n("3846");var r=n("cb7c"),i=n("0bfb"),l=n("9e1e"),o="toString",u=/./[o],a=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?a(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!l&&t instanceof RegExp?i.call(t):void 0)}):u.name!=o&&a(function(){return u.call(this)})},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var r=n("4588"),i=Math.max,l=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):l(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},8378:function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},"86cc":function(t,e,n){var r=n("cb7c"),i=n("c69a"),l=n("6a99"),o=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(r(t),e=l(e,!0),r(n),i)try{return o(t,e,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"87b3":function(t,e,n){var r=Date.prototype,i="Invalid Date",l="toString",o=r[l],u=r.getTime;new Date(NaN)+""!=i&&n("2aba")(r,l,function(){var t=u.call(this);return t===t?o.call(this):i})},"9b43":function(t,e,n){var r=n("d8e8");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"9def":function(t,e,n){var r=n("4588"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a481:function(t,e,n){"use strict";var r=n("cb7c"),i=n("4bf8"),l=n("9def"),o=n("4588"),u=n("0390"),a=n("5f1b"),s=Math.max,c=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,function(t,e,n,b){return[function(r,i){var l=t(this),o=void 0==r?void 0:r[e];return void 0!==o?o.call(r,l,i):n.call(String(l),r,i)},function(t,e){var i=b(n,t,this,e);if(i.done)return i.value;var d=r(t),p=String(this),v="function"===typeof e;v||(e=String(e));var g=d.global;if(g){var m=d.unicode;d.lastIndex=0}var y=[];while(1){var x=a(d,p);if(null===x)break;if(y.push(x),!g)break;var S=String(x[0]);""===S&&(d.lastIndex=u(p,l(d.lastIndex),m))}for(var E="",C=0,N=0;N<y.length;N++){x=y[N];for(var A=String(x[0]),w=s(c(o(x.index),p.length),0),F=[],M=1;M<x.length;M++)F.push(f(x[M]));var k=x.groups;if(v){var I=[A].concat(F,w,p);void 0!==k&&I.push(k);var P=String(e.apply(void 0,I))}else P=h(A,p,w,F,k,e);w>=C&&(E+=p.slice(C,w)+P,C=w+A.length)}return E+p.slice(C)}];function h(t,e,r,l,o,u){var a=r+t.length,s=l.length,c=v;return void 0!==o&&(o=i(o),c=p),n.call(u,c,function(n,i){var u;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(a);case"<":u=o[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>s){var p=d(c/10);return 0===p?n:p<=s?void 0===l[p-1]?i.charAt(1):l[p-1]+i.charAt(1):n}u=l[c-1]}return void 0===u?"":u})}})},aa77:function(t,e,n){var r=n("5ca1"),i=n("be13"),l=n("79e5"),o=n("fdef"),u="["+o+"]",a="​",s=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),d=function(t,e,n){var i={},u=l(function(){return!!o[t]()||a[t]()!=a}),s=i[t]=u?e(p):o[t];n&&(i[n]=s),r(r.P+r.F*u,"String",i)},p=d.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(s,"")),2&e&&(t=t.replace(c,"")),t};t.exports=d},aae3:function(t,e,n){var r=n("d3f4"),i=n("2d95"),l=n("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[l])?!!e:"RegExp"==i(t))}},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,n){var r=n("6821"),i=n("9def"),l=n("77f1");t.exports=function(t){return function(e,n,o){var u,a=r(e),s=i(a.length),c=l(o,s);if(t&&n!=n){while(s>c)if(u=a[c++],u!=u)return!0}else for(;s>c;c++)if((t||c in a)&&a[c]===n)return t||c||0;return!t&&-1}}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},ca5a:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cb7c:function(t,e,n){var r=n("d3f4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},ebd6:function(t,e,n){var r=n("cb7c"),i=n("d8e8"),l=n("2b4c")("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[l])?e:i(n)}},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(r){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fae3:function(t,e,n){"use strict";var r;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=r[1]));n("4f37"),n("57e7"),n("a481"),n("28a5"),n("6b54"),n("87b3");var i,l,o,u,a,s,c,d,p,v,f,b,h,g,m,y,x=0,S=0,E="MOVE",C=1,N=6,A=4,w=.02,F=[],M=/Mac/.test(navigator.platform),k=!1,I="_",P=75,L="Verdana",H=10,T=!1,O=!1,B={61:"=",106:"*",107:"+",109:"-",110:".",111:"/",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},V={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',"[":"{","]":"}",",":"<",".":">","/":"?","\\":"|"};function _(t){c=new Image,F=[],P=75,L="Verdana",E;var e=parseInt(t.attributes["data-width"].value),n=parseInt(t.attributes["data-height"].value);c.src=t.attributes["data-image"].value;var r=this;c.onload=function(i){d={top:t.offsetTop,left:t.offsetLeft},x=0,S=0;var v=e/n,f=c.width/c.height;s=document.createElementNS("http://www.w3.org/2000/svg","svg"),s.setAttributeNS(null,"id","svgLayer"),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),s.setAttributeNS(null,"version","1.1"),s.setAttributeNS(null,"style","position: inherit;"),s.setAttributeNS(null,"width",e),s.setAttributeNS(null,"height",n),t.appendChild(s),a=(v>=1&&f>=1||v<=1&&f<=1)&&f<=v||f<=1&&v>=1?s.height.baseVal.value/c.height:s.width.baseVal.value/c.width,l=a,o=(C/l).toString(),u=(N/l).toString(),m=a*c.width/2,y=a*c.height/2;var b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"id","xlt"),b.setAttributeNS(null,"transform","translate(0,0)scale("+parseFloat(l)+")"),s.appendChild(b);var h,g=document.createElementNS("http://www.w3.org/2000/svg","image");g.setAttributeNS(null,"id","xltImage"),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width",c.width.toString()),g.setAttributeNS(null,"height",c.height.toString()),g.setAttributeNS(null,"preserveAspectRatio","none"),g.setAttributeNS("http://www.w3.org/1999/xlink","href",c.src),b.appendChild(g),p=document.createElement("div"),p.setAttribute("id","svgMenu"),t.parentElement.appendChild(p),h=document.createElement("input"),h.setAttribute("type","button"),h.setAttribute("value","Clear Last Element"),p.appendChild(h),h.addEventListener("click",function(t){At()});var E,A=JSON.parse(t.attributes["data-buttons"].value).buttons,w=function(){h=document.createElement("input"),h.setAttribute("type","button"),h.setAttribute("value",A[E].function.charAt(0).toUpperCase()+A[E].function.slice(1)),h.setAttribute("id","b_"+A[E].function.toLowerCase()),p.appendChild(h);var t=A[E].function;h.addEventListener("click",function(e){Ct(t)})};for(E=0;E<A.length;E++)w();_.prototype.buildSVGmenu(),document.onkeydown=r.keyHandler(),document.onkeyup=r.keyUpHandler(),kt(0,0,l),Ct("MOVE"),r.renderFunction=r.updateSvgByElement,r.touchSupported="ontouchstart"in document.documentElement,r.containerID=t,r.lastMousePoint={x:0,y:0},r.touchSupported?(r.mouseDownEvent="touchstart",r.mouseMoveEvent="touchmove",r.mouseUpEvent="touchend"):(r.mouseDownEvent="mousedown",r.mouseMoveEvent="mousemove",r.mouseUpEvent="mouseup",s.ondblclick=r.doubleClickHandler()),s.onmousedown=r.onSvgMouseDown(),r.mouseMoveHandler=r.onSvgMouseMove,r.mouseUpHandler=r.onSvgMouseUp,s.onmouseup=r.mouseUpHandler(),s.onmousemove=r.mouseMoveHandler()}}function j(t,e){return parseInt(t)+", "+parseInt(e)}function G(t,e){return j(t,e)+", "}function D(t,e,n,r,i,l,o,u){return"cubic"==E?"M "+j(t,e)+" C "+G(n,r)+G(i,l)+j(o,u):"M "+j(t,e)+" Q "+G(n,r)+j(o,u)}function U(t){for(var e=t.replace(/,/g,"").split(" "),n=0,r=[],i=0;i<e.length;i++)bt(e[i])&&(r[n]=e[i],n++);return r}function R(t){return G(t[0],t[1])+" "+G(t[2],t[3])+" "+G(t[4],t[5])+" "+G(t[6],t[7])}function z(t){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return e.setAttributeNS(null,"stroke",i),e.setAttributeNS(null,"stroke-width",o),e.setAttributeNS(null,"stroke-opacity","0.9"),e.setAttributeNS(null,"fill",""),e.setAttributeNS(null,"fill-opacity","0.0"),e.setAttributeNS(null,"stroke-linecap","round"),e}function $(t){return t.setAttributeNS(null,"onmouseover","this.attributes['stroke-width'].value = '"+1.5*o+"';"),t.setAttributeNS(null,"onmouseout","this.attributes['stroke-width'].value = "+o+";"),t}function Z(t){var e=b?b.id:"null",n=h?h.tagName:"null",r=h?h.parentElement.id:"null";console.log("mouseenter eventTarget="+t.target.id+" thisGroup="+e+" thisElement="+n+" parent="+r+" "+E+" "),W(t.target)}function K(t){var e=b?b.id:"null",n=h?h.tagName:"null",r=h?h.parentElement.id:"null";console.log("mouseleave eventTarget="+t.target.id+" thisGroup="+e+" thisElement="+n+" parent="+r+" "+E+" "),J(t.target)}function q(t){return null!=t&&void 0!=t||(t=null),t.removeEventListener("mouseenter",Z),t.removeEventListener("mouseleave",K),t.addEventListener("mouseenter",Z),t.addEventListener("mouseleave",K),t}function W(t){if(Y(t))console.log("Element conflict: "+t.attributes["type"].value);else{if(console.log("setEditElement no conflict"),null==b){var e="thisGroup is NULL";h&&(e+=", thisElement = "+h.toString()),console.log(t.attributes["type"].value+" "+e),b=t}E,t.firstChild&&("path"!=t.firstChild.tagName?E=t.attributes.type?t.attributes.type.value:t.firstChild.tagName:(E="cubic",-1==t.firstChild.attributes.d.value.indexOf("C ")&&(E="quadratic"))),O=!1,_t(E),t.childNodes.length>1&&"g"==t.lastChild.tagName&&J(t);var n=it(t);t.appendChild(n),console.log("setEditElement "+t.id+" "+t.attributes["type"].value)}}function J(t){var e=b?b.id:"null";console.log("clearEditElement: svgInProgress="+O+", group="+t.id+", thisGroup="+e),"SHIFT"!=O&&(t?T?console.log("clearEditElement: waitElement"):b&&e!=t.id?console.log("clearEditElement: group conflict"):(t.childNodes.length>1&&("circle"==t.lastChild.tagName||"g"==t.lastChild.tagName?(t.lastChild.remove(),g=null,E="MOVE",_t(E),O=!1,h=null,b=null):"text"==t.firstChild.tagName&&"text"==O&&Lt()),q(t),E="MOVE",_t(E),O=!1,h=null,b=null):console.log("clearEditElement: group argument null"))}function Y(t){return T?(console.log("checkElementConflict1: waitElement = "+T),!0):O?"SHIFT"==O?(console.log("checkElementConflict3: svgInProgress="+O+"thisGroup="+t.id),b.id!=t.id):O!=t.firstChild.tagName?(console.log("checkElementConflict4: svgInProgress="+O+", thisElement="+h+", group element="+t.firstChild.tagName),!0):b!=t?(console.log("checkElementConflict5: svgInProgress="+O+", thisGroup="+b.id+", group="+t.id+", group element="+t.firstChild.tagName),!0):void 0:(console.log("checkElementConflict2: svgInProgress="+O+"thisGroup="+t.id),!1)}function Q(t){null==t&&console.log("fault");while(t.childElementCount>1&&"g"==t.lastChild.tagName)t.lastChild.remove();O=!1,g=null,Ct("MOVE"),q(t)}function X(t){b||(b=t.parentNode.parentNode),h=b.firstChild,g=b.children[1].children["shift"],E=h.tagName,b.attributes.type&&(E=b.attributes.type.value);for(var e=b.lastChild.childElementCount,n=e;n>1;n--)b.lastChild.lastChild.remove();b.removeEventListener("mouseenter",Z),b.removeEventListener("mouseleave",K),O="SHIFT",console.log("svgInProgress = SHIFT, cursorMode = "+E)}function tt(t){var e=t.parentNode.parentNode;if(b=e,h=e.firstChild,g=e.lastChild.firstChild,E=h.tagName,"circle"==E||"ellipse"==E)for(var n=e.lastChild.childElementCount,r=n;r>0;r--)e.lastChild.lastChild.remove();O="SIZE",console.log("svgInProgress = SIZE, cursorMode = "+E+" "+h.tagName),e.removeEventListener("mouseenter",Z),e.removeEventListener("mouseleave",K)}function et(t){g=t;var e=t.parentNode.parentNode;b=e,h=e.firstChild,parseInt(t.id)==t.parentNode.childElementCount-1&&(g=t),"g"==t.parentNode.lastChild.tagName&&t.parentNode.lastChild.remove(),E=b.attributes.type?b.attributes.type.value:h.tagName,e.removeEventListener("mouseenter",Z),e.removeEventListener("mouseleave",K),t.removeEventListener("mousedown",function(t){}),O="POINT"}function nt(t){if(g==t);g=t;var e=t.parentNode.parentNode.parentNode;b=e,h=e.firstChild,parseInt(t.id)==t.parentNode.childElementCount-1&&(g=t),E=h.tagName,e.removeEventListener("mouseenter",Z),e.removeEventListener("mouseleave",K),h.attributes["points"].value=rt(h,g),g.id=(parseInt(g.id)+1).toString(),O="NEW"}function rt(t,e){for(var n=t.attributes["points"].value.trim().split(" "),r="",i=parseInt(e.id),l=e.attributes["cx"].value+","+e.attributes["cy"].value,o=0;o<n.length;o++)r+=n[o]+" ",o==i&&(r+=l+" ");return r}function it(t){var e,n,r,i,l,o={};t||console.log("group arg null, thisGroup="+b);var u=t.firstChild;if(o=ft(u.tagName),"path"!=u.tagName)for(var a in o)o[a]=vt(u,a);var s=document.createElementNS("http://www.w3.org/2000/svg","g");switch(u.tagName){case"circle":var c=o["cx"],d=o["cy"],p=o["r"];return s.appendChild(lt(c,d,"shift")),s.appendChild(ot(p+c,d,"E")),s.appendChild(ot(c,p+d,"S")),s.appendChild(ot(c-p,d,"W")),s.appendChild(ot(c,d-p,"N")),s;case"ellipse":c=o["cx"],d=o["cy"];var v=o["rx"],f=o["ry"];return s.appendChild(lt(c,d,"shift")),s.appendChild(ot(c+.707*v,d+.707*f,"SE")),s.appendChild(ot(c+.707*v,d-.707*f,"NE")),s.appendChild(ot(c-.707*v,d-.707*f,"NW")),s.appendChild(ot(c-.707*v,d+.707*f,"SW")),s;case"rect":var h=o["x"],g=o["y"],m=o["width"],y=o["height"];return s.appendChild(lt(h,g,"shift")),s.appendChild(ot(h+m,g+y)),s;case"line":var x=o["x1"],S=o["y1"],E=o["x2"],C=o["y2"];return s.appendChild(lt((E+x)/2,(C+S)/2,"shift")),s.appendChild(ut(x,S,"x1-y1")),s.appendChild(ut(E,C,"x2-y2")),s;case"path":var N,A,w=u.attributes["d"].value,F=w.indexOf("Q ")>0,M=U(w);return F&&(M[6]=M[4],M[7]=M[5],M[4]=M[2],M[5]=M[3]),F?(N=parseFloat(M[0])+parseFloat(M[2])+parseFloat(M[6]),A=parseFloat(M[1])+parseFloat(M[3])+parseFloat(M[7]),N=(N/3).toFixed(3),A=(A/3).toFixed(3)):(N=parseFloat(M[0])+parseFloat(M[2])+parseFloat(M[4])+parseFloat(M[6]),A=parseFloat(M[1])+parseFloat(M[3])+parseFloat(M[5])+parseFloat(M[7]),N=(N/4).toFixed(3),A=(A/4).toFixed(3)),s.appendChild(dt(M)),s.appendChild(lt(N,A,"shift")),s.appendChild(ct(M[0],M[1],M[2],M[3],"l1")),s.appendChild(ct(M[4],M[5],M[6],M[7],"l2")),s.appendChild(st(M[0],M[1],"p1")),s.appendChild(st(M[6],M[7],"p2")),s.appendChild(st(M[2],M[3],"c1")),F||s.appendChild(st(M[4],M[5],"c2")),s;case"polygon":case"polyline":var k=u.attributes["points"].value.trim();r=k.split(" ");var I=r[0].split(",");e=parseFloat(I[0]),n=parseFloat(I[1]);for(var P,L=0,H=0,T=0;T<r.length;T++)L+=e,H+=n,T<r.length-1&&(P=r[T+1].split(","),i=parseFloat(P[0]),l=parseFloat(P[1]),e=i,n=l);e=L/r.length,n=H/r.length,s.appendChild(lt(e,n,"shift"));var O=document.createElementNS("http://www.w3.org/2000/svg","g");e=parseFloat(I[0]),n=parseFloat(I[1]);for(var B=0;B<r.length;B++)s.appendChild(ut(e,n,B.toString())),B<r.length-1&&(P=r[B+1].split(","),i=parseFloat(P[0]),l=parseFloat(P[1]),O.appendChild(at(.5*(e+i),.5*(n+l),B.toString()+".5")),e=i,n=l);if("polygon"==u.tagName){I=r[0].split(","),e=parseFloat(I[0]),n=parseFloat(I[1]);var V=(r.length-1).toString()+".5";O.appendChild(at(.5*(e+i),.5*(n+l),V))}return s.appendChild(O),s;case"text":return e=o["x"],n=o["y"],s.appendChild(lt(e,n,"shift")),s}}function lt(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"r",1.25*u),r.setAttributeNS(null,"stroke","#004477"),r.setAttributeNS(null,"fill-opacity","1.0"),r.addEventListener("mousedown",function(t){X(r)}),r.addEventListener("mouseup",function(t){q(r)}),r.setAttributeNS(null,"style","cursor:move;"),r.setAttributeNS(null,"id",n),r}function ot(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"fill-opacity","0.6"),r.addEventListener("mousedown",function(t){tt(r)}),r.setAttributeNS(null,"id",n),r}function ut(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"fill-opacity","0.6"),r.setAttributeNS(null,"id",n),r.addEventListener("mousedown",function(t){et(r)}),r.addEventListener("mouseup",function(t){Q(b)}),r}function at(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"r",.8*u),r.setAttributeNS(null,"stroke","#555555"),r.setAttributeNS(null,"stroke-opacity","0.6"),r.setAttributeNS(null,"fill-opacity","0.4"),r.addEventListener("mousedown",function(t){nt(r)}),r.addEventListener("mouseup",function(t){Q(b)}),r.setAttributeNS(null,"id",n),r}function st(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"stroke","#333333"),r.setAttributeNS(null,"stroke-opacity","0.6"),r.setAttributeNS(null,"fill-opacity","0.8"),r.addEventListener("mousedown",function(t){et(r)}),r.addEventListener("mouseup",function(t){Q(t.target.parentElement.parentElement)}),r.setAttributeNS(null,"id",n),r}function ct(t,e,n,r,i){var l=z("line");return l.setAttributeNS(null,"x1",t),l.setAttributeNS(null,"y1",e),l.setAttributeNS(null,"x2",n),l.setAttributeNS(null,"y2",r),l.setAttributeNS(null,"id",i),l.setAttributeNS(null,"stroke-width","1"),l}function dt(t){var e=z("polyline");return e.setAttributeNS(null,"id","poly"),e.setAttributeNS(null,"points",R(t)),e.setAttributeNS(null,"stroke-opacity","0.0"),e}function pt(t,e){var n=z("circle");return isNaN(t)&&alert("offsetX: "+t.toString()),isNaN(e)&&alert("offsetY: "+e.toString()),n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r",u),n.setAttributeNS(null,"fill","#FFFFFF"),n.setAttributeNS(null,"stroke","#222222"),n.setAttributeNS(null,"stroke-width",.25*u),n}function vt(t,e){return parseFloat(parseFloat(t.attributes[e].value).toFixed(1))}function ft(t){var e=0,n=0,r=1,i=1;switch(t){case"polyline":return{points:r};case"polygon":return{points:r};case"rect":return{x:e,y:n,width:r,height:i};case"line":return{x1:e,y1:n,x2:r,y2:i};case"circle":return{cx:e,cy:n,r:r};case"ellipse":return{cx:e,cy:n,rx:r,ry:i};case"path":return{x1:e,y1:n,xc1:r,yc1:i,xc2:r,yc2:i,x2:e,y2:n};case"text":return{x:e,y:n}}}function bt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function ht(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}_.prototype.onSvgMouseDown=function(){var t=this;return function(e){if(t.updateMousePosition(e),0!=O&&O!=E)return"SHIFT"==O?void 0:void(O=E);if(b&&b.childElementCount>1&&"text"!=E)return J(b),!1;if("polygon"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var n=document.createElementNS("http://www.w3.org/2000/svg","g"),r="g"+document.getElementById("xlt").childElementCount.toString();n.setAttributeNS(null,"id",r),n.setAttributeNS(null,"type",E),b=n,document.getElementById("xlt").appendChild(n);var o=z("polyline");n.appendChild(o),h=n.children[0],o.setAttributeNS(null,"points",F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "+F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "),O=E}else{t.updateMousePosition(e);var u=h.attributes["points"].value,a=((m-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString()+" ";h.attributes["points"].value=u.concat(a)}if("polyline"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var s=document.createElementNS("http://www.w3.org/2000/svg","g");b=s;var c="g"+document.getElementById("xlt").childElementCount.toString();s.setAttributeNS(null,"id",c),s.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(s);var d=z("polyline");s.appendChild(d),h=s.children[0],d.setAttributeNS(null,"stroke-linecap","round"),d.setAttributeNS(null,"points",F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "+F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "),O=E}else{t.updateMousePosition(e);var p=h.attributes["points"].value,v=((m-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString()+" ";h.attributes["points"].value=p.concat(v)}if("rect"==E&&0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var f=document.createElementNS("http://www.w3.org/2000/svg","g"),g="g"+document.getElementById("xlt").childElementCount.toString();f.setAttributeNS(null,"id",g),f.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(f);var C=z("rect");f.appendChild(C),b=f,h=f.children[0],C.setAttributeNS(null,"x",F[0][0]),C.setAttributeNS(null,"y",F[0][1]),C.setAttributeNS(null,"width",1),C.setAttributeNS(null,"height",1),O=E}if("line"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var N=document.createElementNS("http://www.w3.org/2000/svg","g");b=N;var A="g"+document.getElementById("xlt").childElementCount.toString();N.setAttributeNS(null,"id",A),N.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(N);var w=z("line");N.appendChild(w),h=N.children[0],w.setAttributeNS(null,"x1",F[0][0]),w.setAttributeNS(null,"y1",F[0][1]),w.setAttributeNS(null,"x2",F[0][0]),w.setAttributeNS(null,"y2",F[0][1]),O=E}else O=!1,q(h);if("arrow"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var M=document.createElementNS("http://www.w3.org/2000/svg","g");b=M;var k="g"+document.getElementById("xlt").childElementCount.toString();M.setAttributeNS(null,"id",k),M.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(M);var I=z("line");M.appendChild(I),h=M.children[0],I.setAttributeNS(null,"x1",F[0][0]),I.setAttributeNS(null,"y1",F[0][1]),I.setAttributeNS(null,"x2",F[0][0]),I.setAttributeNS(null,"y2",F[0][1]),O=E}else O=!1,q(h);if("circle"==E&&0==O){null!=b&&J(b),E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var H=document.createElementNS("http://www.w3.org/2000/svg","g"),B="g"+document.getElementById("xlt").childElementCount.toString();H.setAttributeNS(null,"id",B),H.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(H);var V=z(E);H.appendChild(V),b=H,h=H.children[0],V.setAttributeNS(null,"cx",F[0][0]),V.setAttributeNS(null,"cy",F[0][1]),V.setAttributeNS(null,"r",1),O=E}if("ellipse"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var _=document.createElementNS("http://www.w3.org/2000/svg","g");b=_;var j="g"+document.getElementById("xlt").childElementCount.toString();_.setAttributeNS(null,"id",j),_.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(_);var G=z("ellipse");_.appendChild(G),h=_.children[0],G.setAttributeNS(null,"cx",F[0][0]),G.setAttributeNS(null,"cy",F[0][1]),G.setAttributeNS(null,"rx",1),G.setAttributeNS(null,"ry",1),O=E}else O=!1,q(h);if("draw"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var U=document.createElementNS("http://www.w3.org/2000/svg","g");b=U;var R="g"+document.getElementById("xlt").childElementCount.toString();U.setAttributeNS(null,"id",R),U.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(U);var Z=z("polyline");U.appendChild(Z),h=U.children[0],Z.setAttributeNS(null,"points",F[0][0].toFixed(3).toString()+","+F[0][1].toFixed(3).toString()+" "),O=E}else O=!1,$(h);if("cubic"==E||"quadratic"==E)if(0==O){E,F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l];var K=document.createElementNS("http://www.w3.org/2000/svg","g");b=K;var W="g"+document.getElementById("xlt").childElementCount.toString();K.setAttributeNS(null,"id",W),K.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(K);var Y=z("path");K.appendChild(Y),h=K.children[0];var Q=F[0][0],X=F[0][1];Y.setAttributeNS(null,"d",D(Q,X,Q,X,Q,X,Q,X)),O=E}else O=!1,q(h);var tt;if("text"==E&&(h&&Lt(),0==O)){F[0]=[(t.lastMousePoint.x-x)/l,(t.lastMousePoint.y-S)/l],E,tt=document.createElementNS("http://www.w3.org/2000/svg","g"),b=tt;var et,nt="g"+document.getElementById("xlt").childElementCount.toString();tt.setAttributeNS(null,"id",nt),tt.setAttributeNS(null,"type",E),document.getElementById("xlt").appendChild(tt),et=document.createElementNS("http://www.w3.org/2000/svg","text"),tt.appendChild(et),h=tt.children[0],et.setAttributeNS(null,"stroke",i),et.setAttributeNS(null,"stroke-width","1"),et.setAttributeNS(null,"stroke-opacity","1.0"),et.setAttributeNS(null,"x",F[0][0]),et.setAttributeNS(null,"y",F[0][1]),et.setAttributeNS(null,"style","font-family: "+L+"; fill: "+i.toString()+";"),et.setAttributeNS(null,"font-size",P),et.innerHTML="_",O="text"}return"MOVE"==E&&0==O&&(O=E),T=!1,e.preventDefault()&&!1}},_.prototype.onSvgMouseMove=function(){var t=this;return function(e){return t.renderFunction(e),e.preventDefault(),!1}};function gt(t){var e=t.key,n=t.keyCode,r=(t.charCode,t.shiftKey);t.ctrlKey;if(20==n)return k=!k,!1;var i=B[n];return i?r&&V[i]?V[i]:i:n>47&&n<58?(e=String.fromCharCode(n),r?V[e]:e):(n>63&&n<91||32==n)&&(e=String.fromCharCode(n),k?M?e.toUpperCase():r?e.toLowerCase():e.toUpperCase():r?e:e.toLowerCase())}function mt(){O=!1,q(b),Ct("MOVE"),g=null,h=null,b=null}function yt(){if("polygon"==E||"polyline"==E){switch(O=!1,E){case"polygon":xt(h),b.innerHTML=b.innerHTML.replace("polyline","polygon").replace("polyline","polygon"),q(b);break;case"polyline":xt(h),q(b);break}"text"==E&&Tt(),h=null,b=null}}function xt(t){var e=t.attributes["points"].value.trim(),n=e.split(" ");e=n[0]+" ";for(var r=1;r<n.length;r++)Et(n[r-1],n[r])&&(e+=n[r]+" ");h.attributes["points"].value=e}function St(t){var e=t.attributes["points"].value.trim(),n=e.split(" ");e=n[0]+" ";for(var r=1;r<n.length-1;r++)n[r]!=n[r-1]&&(e+=n[r]+" ");h.attributes["points"].value=e}function Et(t,e){var n=t.split(","),r=e.split(","),i=n[0],l=n[1],o=r[0],u=r[1];return!(Math.abs(i-o)<1e-6*o&&Math.abs(l-u)<1e-6*u)}function Ct(t){h&&(Nt(),J(b)),"MOVE"==t.toUpperCase()?(E=t,console.log("@setCursorMode1 cursorMode = "+E)):(E=t.toLowerCase(),"rectangle"==t&&(E="rect",console.log("@setCursorMode2 cursorMode = "+E))),"MOVE","MOVE"!=t.toUpperCase()&&(T=!0,console.log("@setCursorMode3 waitElement = "+E)),_t(t),O=!1}function Nt(){switch(E){case"polyline":case"polygon":break;case"circle":if(null==h)return;(h.attributes["cy"].value-h.attributes["r"].value<0||h.attributes["r"].value<2)&&At();break;case"ellipse":if(null==h)return;h.attributes["cy"].value-h.attributes["ry"].value<0&&At();break;case"rect":if(null==h)return;h.attributes["height"].value<0&&At();break;case"line":h.attributes["y2"].value<0&&At();break;case"text":Lt();break}}function At(){var t=document.getElementById("xlt");t.childElementCount>1&&t.lastChild.remove()}function wt(t){t&&t.remove()}function Ft(){if(l<A){var t=l*(1+w);t>A&&(t=A),x=m-(m-x)*t/l,S=y-(y-S)*t/l,kt(x,S,t),l=t,u=(N/l).toString(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}}function Mt(){if(l>a/3){var t=l/(1+w);x=m-(m-x)*t/l,S=y-(y-S)*t/l,kt(x,S,t),l=t,u=(N/l).toString(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}}function kt(t,e,n){var r=document.getElementById("xlt"),i="translate("+t.toString()+", "+e.toString()+")scale("+n.toString()+")";l=n,x=t,S=e,r.attributes["transform"].value=i,document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}function It(t){v=t.key;var e,n=t.keyCode;if(v=gt(t),null==h)return 8==n&&t.preventDefault(),!1;if(13==t.keyCode&&t.shiftKey)return Lt(),!1;if(e=I.slice(0,I.length-1),n>31&&(I=e+v+"_"),8==n&&(I=e.slice(0,e.length-1)+"_",t.preventDefault()),v||13==n||8==n){h.innerHTML=Pt(I),h.attributes["stroke"].value=i,h.attributes["style"].value="font-family: "+L+"; fill: "+i+";",h.attributes["font-size"].value=P;var r=h.attributes["x"].value,l=parseInt(h.attributes["y"].value)+parseInt(P),o=h.cloneNode();13==t.keyCode&&(h.innerHTML=Pt(e.slice(0,e.length)),o.attributes["x"].value=r,o.attributes["y"].value=l,h.parentElement.appendChild(o),h=o,h.innerHTML="_",I="_",t.preventDefault())}}function Pt(t){var e=t.replace(/  /g," &nbsp;");return e=e.replace(/</g,"&lt;").replace(/>/g,"&gt"),e}function Lt(){if(Ht(),b){if(b.hasChildNodes())q(b);else{b.remove()}Tt(),b=null}}function Ht(){if(h&&h.parentElement)if("_"==h.parentElement.lastChild.innerHTML)h.parentElement.lastChild.remove(),I="_",h=null;else if("text"==O){if(h.innerHTML=Pt(I.slice(0,I.length-1)),""==h.innerHTML){h.remove(),h=null}if("g"==b.lastChild.tagName){b.lastChild.remove}}}function Tt(){I="_",F=[],h=null,O=!1}function Ot(t){i=t,document.getElementById("cursorColor").attributes["style"].value="background-color: "+i}function Bt(t){var e=document.getElementById("selectUserColor");e.attributes["style"].value="background-color: "+t,e.blur()}function Vt(){return document.getElementById("userColor").value}function _t(t){var e=t;"rect"==t&&(e="rectangle"),document.getElementById("mode").textContent=e.toUpperCase(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}function jt(t){var e,n,r=s.cloneNode(!0),i=r.firstChild;t||(r.removeAttribute("height"),r.removeAttribute("width"),r.firstChild.attributes["transform"].value="translate(0, 0)scale(1)",i.children["xltImage"].remove());var l,o,u=i.childElementCount,a=1;for(l=1;l<u;l++)n=i.childNodes[a],a++,t||(n.attributes.type?n.removeAttribute("id"):(a--,o=n.childElementCount,e=i.children[a].innerHTML,i.children[a].outerHTML=e,a+=o));return t||(e=i.firstChild.outerHTML.replace("<image","\x3c!--image").replace("/image>","/image--\x3e"),i.firstChild.outerHTML=e),r}function Gt(){P=document.getElementById("textSize").value}_.prototype.updateMousePosition=function(t){var e;e=this.touchSupported?t.originalEvent.touches[0]:t;var n=d;this.lastMousePoint.x=e.pageX-n.left,this.lastMousePoint.y=e.pageY-n.top,m=this.lastMousePoint.x,y=this.lastMousePoint.y},_.prototype.updateSvgByElement=function(t){if("MOVE"!=E){if("polygon"==E||"polyline"==E&&"polygon"==O){if(0==O)return;if(this.updateMousePosition(t),"SHIFT"==O){((m-x)/l).toFixed(3).toString(),((y-S)/l).toFixed(3).toString();var e=h.attributes["points"].value.trim(),n=e.split(" ");if(null!=g){var r=parseFloat(g.attributes["cx"].value),i=parseFloat(g.attributes["cy"].value),o=(m-x)/l,u=(y-S)/l,a=o-r,s=u-i;g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l;var c,d="",p=[],v=[];for(c=0;c<n.length;c++){var f=n[c].split(",");p[c]=(parseFloat(f[0])+a).toFixed(3),v[c]=(parseFloat(f[1])+s).toFixed(3),d+=p[c]+","+v[c]+" "}for(var C=0;C<n.length;C++)e+=n[C]+" ";h.attributes["points"].value=d}}else{var N=((m-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString(),A=h.attributes["points"].value.trim(),w=A.split(" ");if(null!=g){if(g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l,bt(g.id)){w[parseInt(g.id)]=N,A="";for(var F=0;F<w.length;F++)A+=w[F]+" ";h.attributes["points"].value=A}}else{A="";for(var M=0;M<w.length-1;M++)A+=w[M]+" ";N+=" ",h.attributes["points"].value=A.concat(N)}}}else if("polyline"==E){if(0==O)return;if(this.updateMousePosition(t),"SHIFT"==O){((m-x)/l).toFixed(3).toString(),((y-S)/l).toFixed(3).toString();var k=h.attributes["points"].value.trim(),I=k.split(" ");if(null!=g){var L=parseFloat(g.attributes["cx"].value),T=parseFloat(g.attributes["cy"].value),B=(m-x)/l,V=(y-S)/l,_=B-L,$=V-T;g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l;var Z,K="",q=[],W=[];for(Z=0;Z<I.length;Z++){var J=I[Z].split(",");q[Z]=(parseFloat(J[0])+_).toFixed(3),W[Z]=(parseFloat(J[1])+$).toFixed(3),K+=q[Z]+","+W[Z]+" "}for(var Y=0;Y<I.length;Y++)k+=I[Y]+" ";h.attributes["points"].value=K}}else{var Q=((m-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString(),X=h.attributes["points"].value.trim(),tt=X.split(" ");if(null!=g){if(g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l,bt(g.id)){tt[parseInt(g.id)]=Q,X="";for(var et=0;et<tt.length;et++)X+=tt[et]+" ";h.attributes["points"].value=X}}else{X="";for(var nt=0;nt<tt.length-1;nt++)X+=tt[nt]+" ";Q+=" ",h.attributes["points"].value=X.concat(Q)}}}else if("rect"==E){if(0==O)return;if("SHIFT"==O)this.updateMousePosition(t),g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l,h.attributes["x"].value=(m-x)/l,h.attributes["y"].value=(y-S)/l;else{var rt=h.attributes["x"].value,it=h.attributes["y"].value;this.updateMousePosition(t),h.attributes["width"].value=(m-x)/l-rt,h.attributes["height"].value=(y-S)/l-it,g&&(g=t.target,g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l)}}else if("line"==E){var lt;if(m=this.lastMousePoint.x,y=this.lastMousePoint.y,"mousedown"==t.type||0==O)return void console.log("cursorMode=line abort event:"+t.type+" svgInProgress= "+O);if("SHIFT"==O){this.updateMousePosition(t);var ot=parseFloat(h.attributes["x1"].value),ut=parseFloat(h.attributes["y1"].value),at=parseFloat(h.attributes["x2"].value),st=parseFloat(h.attributes["y2"].value),ct=parseFloat(g.attributes["cx"].value),dt=parseFloat(g.attributes["cy"].value),pt=(m-x)/l,vt=(y-S)/l,ft=ct-pt,gt=vt-dt;g&&(g.attributes["cx"].value=pt,g.attributes["cy"].value=vt,h.attributes["x1"].value=ot-ft,h.attributes["y1"].value=gt+ut,h.attributes["x2"].value=at-ft,h.attributes["y2"].value=gt+st)}else this.updateMousePosition(t),lt=["x2","y2"],null!=g&&(g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l,bt(g.id)||(lt=g.id.split("-")),"shift"==b.lastChild.firstChild.id&&b.lastChild.firstChild.remove()),h.attributes[lt[0]].value=(m-x)/l,h.attributes[lt[1]].value=(y-S)/l,console.log("x: "+((m-x)/l).toString()+" / y: "+((y-S)/l).toString())}else if("arrow"==E){var mt;if(m=this.lastMousePoint.x,y=this.lastMousePoint.y,"mousedown"==t.type||0==O)return;var yt=b.children[0];if(this.updateMousePosition(t),"SHIFT"==O){var xt=parseFloat(yt.attributes["x1"].value),St=parseFloat(yt.attributes["y1"].value),Et=parseFloat(yt.attributes["x2"].value),Ct=parseFloat(yt.attributes["y2"].value);g||(g=yt.parentElement.lastChild.children["shift"]);var Nt=parseFloat(g.attributes["cx"].value),At=parseFloat(g.attributes["cy"].value),wt=(m-x)/l,Ft=(y-S)/l,Mt=Nt-wt,It=Ft-At;g.attributes["cx"].value=wt,g.attributes["cy"].value=Ft,yt.attributes["x1"].value=xt-Mt,yt.attributes["y1"].value=It+St,yt.attributes["x2"].value=Et-Mt,yt.attributes["y2"].value=It+Ct}else mt=["x2","y2"],null!=g&&(g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l,bt(g.id)||(mt=g.id.split("-"))),yt.attributes[mt[0]].value=(m-x)/l,yt.attributes[mt[1]].value=(y-S)/l;while(b.childElementCount>1)b.lastChild.remove();var Pt=h.attributes["x1"].value,Lt=h.attributes["y1"].value,Ht=h.attributes["x2"].value,Tt=h.attributes["y2"].value,Ot=h.attributes["stroke"].value,Bt=Ht-Pt,Vt=Tt-Lt,_t=Math.sqrt(Bt*Bt+Vt*Vt);0==_t&&(_t=1);var jt,Gt=Bt/_t,Dt=Vt/_t;jt=document.getElementById("arrowHeadPixels").checked?document.getElementById("arrowHeadLength").value:_t*H/100;var Ut=parseFloat(Ht)-Gt*jt,Rt=parseFloat(Tt)-Dt*jt,zt=(Ut+jt*Dt/2).toFixed(3),$t=(Rt-jt*Gt/2).toFixed(3),Zt=(Ut-jt*Dt/2).toFixed(3),Kt=(Rt+jt*Gt/2).toFixed(3),qt=z("line");qt.setAttributeNS(null,"x1",Ht),qt.setAttributeNS(null,"y1",Tt),qt.setAttributeNS(null,"x2",zt),qt.setAttributeNS(null,"y2",$t),qt.setAttributeNS(null,"stroke",Ot);var Wt=z("line");if(Wt.setAttributeNS(null,"x1",Ht),Wt.setAttributeNS(null,"y1",Tt),Wt.setAttributeNS(null,"x2",Zt),Wt.setAttributeNS(null,"y2",Kt),Wt.setAttributeNS(null,"stroke",Ot),document.getElementById("arrowHeadClosed").checked){var Jt=z("polygon"),Yt=Ht+","+Tt+" "+zt+","+$t+" "+Zt+","+Kt;Jt.setAttributeNS(null,"points",Yt),Jt.setAttributeNS(null,"stroke",Ot),b.appendChild(Jt)}else b.appendChild(qt),b.appendChild(Wt)}else if("circle"==E){if("mousedown"==t.type||0==O)return;if("SHIFT"==O)this.updateMousePosition(t),g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l,h.attributes["cx"].value=(m-x)/l,h.attributes["cy"].value=(y-S)/l;else{var Qt=h.attributes["cx"].value,Xt=h.attributes["cy"].value;this.updateMousePosition(t),m=this.lastMousePoint.x,y=this.lastMousePoint.y;var te=ht(Qt,Xt,(m-x)/l,(y-S)/l);if(h.attributes["r"].value=te,g)switch(g=t.target,g.id){case"E":g.attributes["cx"].value=parseFloat(Qt)+te;break;case"S":g.attributes["cy"].value=parseFloat(Xt)+te;break;case"W":g.attributes["cx"].value=parseFloat(Qt)-te;break;case"N":g.attributes["cy"].value=parseFloat(Xt)-te;break}var ee=t.target.parentElement.children;ee["E"]&&(ee["E"].attributes["cx"].value=parseFloat(Qt)+te,ee["S"].attributes["cy"].value=parseFloat(Xt)+te,ee["W"].attributes["cx"].value=parseFloat(Qt)-te,ee["N"].attributes["cy"].value=parseFloat(Xt)-te)}}else if("ellipse"==E){if(m=this.lastMousePoint.x,y=this.lastMousePoint.y,"mousedown"==t.type||0==O)return;if("SHIFT"==O)this.updateMousePosition(t),g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l,h.attributes["cx"].value=(m-x)/l,h.attributes["cy"].value=(y-S)/l;else{var ne=h.attributes["cx"].value,re=h.attributes["cy"].value;this.updateMousePosition(t),m=this.lastMousePoint.x,y=this.lastMousePoint.y,h.attributes["rx"].value=1.414*Math.abs(ne-(m-x)/l),h.attributes["ry"].value=1.414*Math.abs(re-(y-S)/l)}}else if("draw"==E){if(0==O)return;this.updateMousePosition(t);var ie=h.attributes["points"].value,le=((m-x)/l).toFixed(3).toString()+","+((y-S)/l).toFixed(3).toString()+" ";h.attributes["points"].value=ie.concat(le)}else if("cubic"==E||"quadratic"==E){if(m=this.lastMousePoint.x,y=this.lastMousePoint.y,"mousedown"==t.type||0==O)return;this.updateMousePosition(t);var oe=h.attributes["d"].value,ue=oe.indexOf("Q ")>0;if(null!=g){var ae=(m-x)/l,se=(y-S)/l,ce=parseFloat(g.attributes["cx"].value),de=parseFloat(g.attributes["cy"].value);console.log("endpoints: ["+ae+", "+se+"], ["+ce+", "+de+"]");var pe=ae-ce,ve=se-de;g.attributes["cx"].value=ae,g.attributes["cy"].value=se;var fe=U(oe);if("shift"==g.id){console.log(oe),console.log("dx: "+pe+", dy: "+ve);for(var be=0;be<fe.length;be++)fe[be]=(pe+parseFloat(fe[be])).toFixed(3),fe[be+1]=(ve+parseFloat(fe[be+1])).toFixed(3),be++;ue&&(fe[6]=fe[4],fe[7]=fe[5]),h.attributes["d"].value=D(fe[0],fe[1],fe[2],fe[3],fe[4],fe[5],fe[6],fe[7]),console.log(h.attributes["d"].value)}else{switch(ue&&(fe[6]=fe[4],fe[7]=fe[5]),g.id){case"p1":fe[0]=ae.toFixed(3),fe[1]=se.toFixed(3);break;case"p2":fe[6]=ae.toFixed(3),fe[7]=se.toFixed(3);break;case"c1":fe[2]=ae.toFixed(3),fe[3]=se.toFixed(3);break;case"c2":fe[4]=ae.toFixed(3),fe[5]=se.toFixed(3);break}ue&&(fe[4]=fe[2],fe[5]=fe[3]),h.attributes["d"].value=D(fe[0],fe[1],fe[2],fe[3],fe[4],fe[5],fe[6],fe[7]),h.parentElement.lastChild.children["l1"].attributes["x1"].value=fe[0],h.parentElement.lastChild.children["l1"].attributes["y1"].value=fe[1],h.parentElement.lastChild.children["l1"].attributes["x2"].value=fe[2],h.parentElement.lastChild.children["l1"].attributes["y2"].value=fe[3],h.parentElement.lastChild.children["l2"].attributes["x1"].value=fe[4],h.parentElement.lastChild.children["l2"].attributes["y1"].value=fe[5],h.parentElement.lastChild.children["l2"].attributes["x2"].value=fe[6],h.parentElement.lastChild.children["l2"].attributes["y2"].value=fe[7],h.parentElement.lastChild.children["poly"].attributes["points"].value=R(fe)+fe[0]+", "+fe[1]}}else{var he,ge=(m-x)/l,me=(y-S)/l,ye=" C ";"quadratic"==E&&(ye=" Q ");var xe=oe.split(ye),Se=xe[0].split("M ");Se=Se[1].split(", ");var Ee=parseInt(Se[0]),Ce=parseInt(Se[1]),Ne=Ee-ge,Ae=Ce-me,we=xe[1].split(", ");" Q "==ye?(we[0]=(Ee-.4*Ne).toFixed(3),we[1]=(Ce-.4*Ae).toFixed(3),he=xe[0]+ye+G(we[0],we[1])):(we[0]=(Ee-.4*Ne).toFixed(3),we[1]=(Ce-.4*Ae).toFixed(3),we[2]=(Ee-.6*Ne).toFixed(3),we[3]=(Ce-.6*Ae).toFixed(3),he=xe[0]+ye+G(we[0],we[1]),he+=G(we[2],we[3]),he+=G(ge,me),console.log("p1: "+Se[0]+", "+Se[1]),console.log("control points: "+we[0]+", "+we[1]+" ... "+we[2]+", "+we[3]),console.log("p2: "+ge+", "+me)),he+=j(ge,me),h.attributes["d"].value=he}}else if("text"==E&&"SHIFT"==O){this.updateMousePosition(t),g.attributes["cx"].value=(m-x)/l,g.attributes["cy"].value=(y-S)/l;for(var Fe=0;Fe<b.children.length;Fe++)"text"==b.children[Fe].tagName?(b.children[Fe].attributes["x"].value=(m-x)/l,b.children[Fe].attributes["y"].value=(y-S)/l+Fe*P):(b.children[Fe].children[0].attributes["cx"].value=(m-x)/l,b.children[Fe].children[0].attributes["cy"].value=(y-S)/l)}}else if("MOVE"==E&&"MOVE"==O){var Me=this.lastMousePoint.x,ke=this.lastMousePoint.y;this.updateMousePosition(t),x-=Me-m,S-=ke-y,kt(x,S,l)}return t.preventDefault()&&!1},_.prototype.onSvgMouseUp=function(t){return function(t){return O?("SHIFT"==O?(O=!1,J(b)):"SIZE"==O?(O=!1,q(h.parentNode)):"bubble"==E?O=!1:"draw"==E?(O=!1,q(b)):"cubic"==E||"quadratic"==E?(O=!1,q(b)):"MOVE"==E?O=!1:"rect"==E?(O=!1,q(b),g=null,h=null,b=null):"line"==E?(O=!1,q(b),g=null,h=null,b=null):"arrow"==E?(O=!1,q(b),g=null,h=null,b=null):"polygon"==E?null==g||(O=!1,q(b),g=null,h=null,b=null):"polyline"==E?null==g||(O=!1,q(b),g=null,h=null,b=null):"circle"==E?(O=!1,q(b),g=null,h=null,b=null):"ellipse"==E?(O=!1,q(b),g=null,h=null,b=null):"text"==E&&0==O&&("circle"==b.lastChild.tagName&&J(group),q(b)),F=[],!1):t.preventDefault()&&!1}},_.prototype.keyUpHandler=function(){return function(t){20==t.keyCode&&(k=!k)}},_.prototype.keyHandler=function(){return function(t){var e=t.keyCode,n=document.activeElement;switch(e){case 16:return v="Shift",f,void(f=v);case 20:return void(k=!k);case 93:return v="Meta",f,void(f=v);case 82:t.shiftKey&&(t.ctrlKey||t.metaKey)&&location.reload(!0);case 66:if(t.ctrlKey&&b){var r=b.cloneNode(!0);b.remove(),J(r),s.firstChild.insertBefore(r,s.firstChild.childNodes[1])}case 84:if(t.ctrlKey&&b){var i=b.cloneNode(!0);b.remove(),J(i),s.firstChild.appendChild(i)}default:null,f=v}if("text"!=E||"BODY"!=n.tagName&&n.id!=s.parentElement.id){if("Enter"==t.key||13==e)switch(E){case"polygon":return void yt();case"polyline":return void yt();case"line":return void mt();case"rectangle":return void mt();case"circle":return void mt();case"ellipse":return void mt();case"cubic":return void mt();case"quadratic":return void mt();case"draw":return void mt()}if("Delete"==t.key||"Backspace"==t.key||46==e||8==e){if(t.shiftKey)return wt(b),O=!1,void Ct("MOVE");if("BODY"==n.tagName||n.id==s.parentElement.id)return void t.preventDefault()}if("Escape"!=t.key&&27!=e);else switch(E){case"polyline":if(O==E)return void St(h)}}else It(t)}},_.prototype.doubleClickHandler=function(){return function(){yt()}},_.prototype.mouseWheelScrollHandler=function(){return function(t){t.stopImmediatePropagation(),t.stopPropagation();var e=1e3;"DOMMouseScroll"==t.type&&(e=100);var n=-parseInt(t.deltaY||-t.detail);m=t.clientX-d.left,y=t.clientY-d.top;var r=n/e;return r>0?Ft():Mt(),t.preventDefault()&&!1}},_.prototype.showSVG=function(t){p.children["textSVGorJSON"].textContent=jt(t).outerHTML},_.prototype.jsonSVG=function(t){var e=jt(!1).firstChild;e.removeAttribute("id"),e.removeAttribute("transform");var n={data:{type:"svg",attributes:e.outerHTML}};return p.children["textSVGorJSON"].textContent=JSON.stringify(n),n},_.prototype.buildSVGmenu=function(){var t,e;t=document.createElement("input"),t.setAttribute("type","button"),t.setAttribute("value","MOVE"),t.setAttribute("id","b_move"),p.appendChild(t),t.addEventListener("click",function(t){Ct("MOVE")}),e=document.createElement("span"),e.setAttribute("id","mode"),p.appendChild(e),t=document.createElement("input"),t.setAttribute("type","button"),t.setAttribute("value","Zoom IN"),t.setAttribute("id","b_zoomin"),p.appendChild(t),t.addEventListener("click",function(e){t.blur(),Ft()}),t=document.createElement("span"),t.setAttribute("id","zoom"),t.setAttribute("innerHTML"," Zoom:  ----"),p.appendChild(t),t=document.createElement("input"),t.setAttribute("type","button"),t.setAttribute("value","Zoom OUT"),t.setAttribute("id","b_zoomout"),p.appendChild(t),t.addEventListener("click",function(e){t.blur(),Mt()}),t=document.createElement("input"),t.setAttribute("type","button"),t.setAttribute("value","Reset"),t.setAttribute("id","b_reset"),p.appendChild(t),t.addEventListener("click",function(e){t.blur(),kt(0,0,a)}),e=document.createElement("span"),e.setAttribute("id","textBlock"),p.appendChild(e);var n=document.createElement("span");n.innerHTML="Text Size: ",e.appendChild(n),t=document.createElement("input"),t.setAttribute("id","textSize"),t.setAttribute("type","number"),t.setAttribute("min","5"),t.setAttribute("step","5"),t.setAttribute("max","300"),t.setAttribute("style","width: 4em"),t.setAttribute("value","75"),e.appendChild(t),t.addEventListener("change",function(t){Gt()}),p.appendChild(document.createElement("br")),e=document.createElement("span"),e.innerHTML="Select color: ",p.appendChild(e);var r,l={buttons:[{color:"#FF0000"},{color:"#00FF00"},{color:"#0000FF"},{color:"#000000"},{color:"#666666"},{color:"#FF0000"}]};for(r=0;r<l.buttons.length;r++)if(4==r&&(t=document.createElement("input"),t.setAttribute("id","userColor"),t.setAttribute("type","text"),t.setAttribute("value",l.buttons[r].color),t.setAttribute("style","width: 5em"),p.appendChild(t),t.addEventListener("change",function(e){Bt(Vt()),t.blur()}),t=document.createElement("input"),t.setAttribute("id","selectUserColor"),t.setAttribute("type","button"),t.setAttribute("style","background-color: "+l.buttons[r].color),p.appendChild(t),t.addEventListener("click",function(e){Ot(Vt()),t.blur()})),r<l.buttons.length-2&&function(){t=document.createElement("input"),t.setAttribute("type","button"),t.setAttribute("style","background-color: "+l.buttons[r].color),p.appendChild(t);var e=l.buttons[r].color;t.addEventListener("click",function(n){Ot(e),t.blur()})}(),r>l.buttons.length-2){var o=document.createElement("span");o.innerHTML=" Selected Color >",p.appendChild(o),t=document.createElement("input"),t.setAttribute("id","cursorColor"),t.setAttribute("type","button"),t.setAttribute("style","background-color: "+l.buttons[r].color),p.appendChild(t),i=l.buttons[r].color}t=document.createElement("input"),t.setAttribute("id","svgArrow"),t.setAttribute("type","button"),t.setAttribute("value","Arrow line"),p.appendChild(t),t.addEventListener("click",function(e){Ct("arrow"),t.blur()}),e=document.createElement("span"),e.setAttribute("id","arrowBlock"),e.innerHTML+=" &nbsp; Fixed:",t=document.createElement("input"),t.setAttribute("id","arrowHeadPixels"),t.setAttribute("type","checkbox"),e.appendChild(t),t.addEventListener("click",function(e){t.blur()}),e.innerHTML+=" &nbsp; Closed:",t=document.createElement("input"),t.setAttribute("id","arrowHeadClosed"),t.setAttribute("type","checkbox"),e.appendChild(t),t.addEventListener("click",function(e){t.blur()}),e.innerHTML+=" &nbsp; Length:",t=document.createElement("input"),t.setAttribute("id","arrowHeadLength"),t.setAttribute("type","number"),t.setAttribute("value","50"),t.setAttribute("style","width: 4em"),e.appendChild(t),t.addEventListener("change",function(e){t.blur()}),e.innerHTML+=" &nbsp; Percent:",t=document.createElement("input"),t.setAttribute("id","arrowHeadPercent"),t.setAttribute("type","number"),t.setAttribute("min","5"),t.setAttribute("step","1"),t.setAttribute("max","30"),t.setAttribute("style","width: 4em"),t.setAttribute("value","10"),e.appendChild(t),e.addEventListener("change",function(e){t.blur(),H=parseFloat(document.getElementById("arrowHeadPercent").value)}),p.appendChild(e),t=document.createElement("input"),t.setAttribute("id","saveSVG"),t.setAttribute("type","button"),t.setAttribute("value","Extract SVG"),p.appendChild(t),t.addEventListener("click",function(e){t.blur(),_.prototype.showSVG(!0)}),t=document.createElement("input"),t.setAttribute("id","plainSVG"),t.setAttribute("type","button"),t.setAttribute("value","Plain SVG"),p.appendChild(t),t.addEventListener("click",function(e){t.blur(),_.prototype.showSVG(!1)}),t=document.createElement("input"),t.setAttribute("id","svgJSON"),t.setAttribute("type","button"),t.setAttribute("value","JSON SVG"),p.appendChild(t),t.addEventListener("click",function(t){_.prototype.jsonSVG(!1)}),p.appendChild(document.createElement("br"));var u=document.createElement("textarea");u.setAttribute("id","textSVGorJSON"),p.appendChild(u)};var Dt=_;new Dt(document.getElementById("container"))},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}})});
//# sourceMappingURL=svg-detailer.umd.min.js.map