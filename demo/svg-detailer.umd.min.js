(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["../demo/svg-detailer"]=e():t["../demo/svg-detailer"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fae3")}({"02f4":function(t,e,n){var r=n("4588"),i=n("be13");t.exports=function(t){return function(e,n){var l,a,u=String(i(e)),o=r(n),s=u.length;return o<0||o>=s?t?"":void 0:(l=u.charCodeAt(o),l<55296||l>56319||o+1===s||(a=u.charCodeAt(o+1))<56320||a>57343?t?u.charAt(o):l:t?u.slice(o,o+2):a-56320+(l-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),l=n("79e5"),a=n("be13"),u=n("2b4c"),o=n("520a"),s=u("species"),c=!l((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=u(t),v=!l((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),f=v?!l((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[s]=function(){return n}),n[p](""),!e})):void 0;if(!v||!f||"replace"===t&&!c||"split"===t&&!d){var b=/./[p],h=n(a,p,""[t],(function(t,e,n,r,i){return e.exec===o?v&&!i?{done:!0,value:b.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),m=h[0],g=h[1];r(String.prototype,t,m),i(RegExp.prototype,p,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},"230e":function(t,e,n){var r=n("d3f4"),i=n("7726").document,l=r(i)&&r(i.createElement);t.exports=function(t){return l?i.createElement(t):{}}},"23c6":function(t,e,n){var r=n("2d95"),i=n("2b4c")("toStringTag"),l="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:l?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},"28a5":function(t,e,n){"use strict";var r=n("aae3"),i=n("cb7c"),l=n("ebd6"),a=n("0390"),u=n("9def"),o=n("5f1b"),s=n("520a"),c=n("79e5"),d=Math.min,p=[].push,v="split",f="length",b="lastIndex",h=4294967295,m=!c((function(){RegExp(h,"y")}));n("214f")("split",2,(function(t,e,n,c){var g;return g="c"=="abbc"[v](/(b)*/)[1]||4!="test"[v](/(?:)/,-1)[f]||2!="ab"[v](/(?:ab)*/)[f]||4!="."[v](/(.?)(.?)/)[f]||"."[v](/()()/)[f]>1||""[v](/.?/)[f]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);var l,a,u,o=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=void 0===e?h:e>>>0,m=new RegExp(t.source,c+"g");while(l=s.call(m,i)){if(a=m[b],a>d&&(o.push(i.slice(d,l.index)),l[f]>1&&l.index<i[f]&&p.apply(o,l.slice(1)),u=l[0][f],d=a,o[f]>=v))break;m[b]===l.index&&m[b]++}return d===i[f]?!u&&m.test("")||o.push(""):o.push(i.slice(d)),o[f]>v?o.slice(0,v):o}:"0"[v](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),l=void 0==n?void 0:n[e];return void 0!==l?l.call(n,i,r):g.call(String(i),n,r)},function(t,e){var r=c(g,t,this,e,g!==n);if(r.done)return r.value;var s=i(t),p=String(this),v=l(s,RegExp),f=s.unicode,b=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(m?"y":"g"),y=new v(m?s:"^(?:"+s.source+")",b),x=void 0===e?h:e>>>0;if(0===x)return[];if(0===p.length)return null===o(y,p)?[p]:[];var S=0,E=0,C=[];while(E<p.length){y.lastIndex=m?E:0;var N,w=o(y,m?p:p.slice(E));if(null===w||(N=d(u(y.lastIndex+(m?0:E)),p.length))===S)E=a(p,E,f);else{if(C.push(p.slice(S,E)),C.length===x)return C;for(var A=1;A<=w.length-1;A++)if(C.push(w[A]),C.length===x)return C;E=S=N}}return C.push(p.slice(S)),C}]}))},"2aba":function(t,e,n){var r=n("7726"),i=n("32e9"),l=n("69a8"),a=n("ca5a")("src"),u=n("fa5b"),o="toString",s=(""+u).split(o);n("8378").inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,u){var o="function"==typeof n;o&&(l(n,"name")||i(n,"name",e)),t[e]!==n&&(o&&(l(n,a)||i(n,a,t[e]?""+t[e]:s.join(String(e)))),t===r?t[e]=n:u?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,o,(function(){return"function"==typeof this&&this[a]||u.call(this)}))},"2b4c":function(t,e,n){var r=n("5537")("wks"),i=n("ca5a"),l=n("7726").Symbol,a="function"==typeof l,u=t.exports=function(t){return r[t]||(r[t]=a&&l[t]||(a?l:i)("Symbol."+t))};u.store=r},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"32e9":function(t,e,n){var r=n("86cc"),i=n("4630");t.exports=n("9e1e")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},4588:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},"4f37":function(t,e,n){"use strict";n("aa77")("trim",(function(t){return function(){return t(this,3)}}))},"520a":function(t,e,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,l=String.prototype.replace,a=i,u="lastIndex",o=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[u]||0!==e[u]}(),s=void 0!==/()??/.exec("")[1],c=o||s;c&&(a=function(t){var e,n,a,c,d=this;return s&&(n=new RegExp("^"+d.source+"$(?!\\s)",r.call(d))),o&&(e=d[u]),a=i.call(d,t),o&&a&&(d[u]=d.global?a.index+a[0].length:e),s&&a&&a.length>1&&l.call(a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a}),t.exports=a},5537:function(t,e,n){var r=n("8378"),i=n("7726"),l="__core-js_shared__",a=i[l]||(i[l]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},"57e7":function(t,e,n){"use strict";var r=n("5ca1"),i=n("c366")(!1),l=[].indexOf,a=!!l&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n("2f21")(l)),"Array",{indexOf:function(t){return a?l.apply(this,arguments)||0:i(this,t,arguments[1])}})},"5ca1":function(t,e,n){var r=n("7726"),i=n("8378"),l=n("32e9"),a=n("2aba"),u=n("9b43"),o="prototype",s=function(t,e,n){var c,d,p,v,f=t&s.F,b=t&s.G,h=t&s.S,m=t&s.P,g=t&s.B,y=b?r:h?r[e]||(r[e]={}):(r[e]||{})[o],x=b?i:i[e]||(i[e]={}),S=x[o]||(x[o]={});for(c in b&&(n=e),n)d=!f&&y&&void 0!==y[c],p=(d?y:n)[c],v=g&&d?u(p,r):m&&"function"==typeof p?u(Function.call,p):p,y&&a(y,c,p,t&s.U),x[c]!=p&&l(x,c,v),m&&S[c]!=p&&(S[c]=p)};r.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var l=n.call(t,e);if("object"!==typeof l)throw new TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"626a":function(t,e,n){var r=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},6821:function(t,e,n){var r=n("626a"),i=n("be13");t.exports=function(t){return r(i(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"6b54":function(t,e,n){"use strict";n("3846");var r=n("cb7c"),i=n("0bfb"),l=n("9e1e"),a="toString",u=/./[a],o=function(t){n("2aba")(RegExp.prototype,a,t,!0)};n("79e5")((function(){return"/a/b"!=u.call({source:"a",flags:"b"})}))?o((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!l&&t instanceof RegExp?i.call(t):void 0)})):u.name!=a&&o((function(){return u.call(this)}))},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var r=n("4588"),i=Math.max,l=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):l(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},8378:function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},"86cc":function(t,e,n){var r=n("cb7c"),i=n("c69a"),l=n("6a99"),a=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(r(t),e=l(e,!0),r(n),i)try{return a(t,e,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"87b3":function(t,e,n){var r=Date.prototype,i="Invalid Date",l="toString",a=r[l],u=r.getTime;new Date(NaN)+""!=i&&n("2aba")(r,l,(function(){var t=u.call(this);return t===t?a.call(this):i}))},"9b43":function(t,e,n){var r=n("d8e8");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"9def":function(t,e,n){var r=n("4588"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a481:function(t,e,n){"use strict";var r=n("cb7c"),i=n("4bf8"),l=n("9def"),a=n("4588"),u=n("0390"),o=n("5f1b"),s=Math.max,c=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,b){return[function(r,i){var l=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,l,i):n.call(String(l),r,i)},function(t,e){var i=b(n,t,this,e);if(i.done)return i.value;var d=r(t),p=String(this),v="function"===typeof e;v||(e=String(e));var m=d.global;if(m){var g=d.unicode;d.lastIndex=0}var y=[];while(1){var x=o(d,p);if(null===x)break;if(y.push(x),!m)break;var S=String(x[0]);""===S&&(d.lastIndex=u(p,l(d.lastIndex),g))}for(var E="",C=0,N=0;N<y.length;N++){x=y[N];for(var w=String(x[0]),A=s(c(a(x.index),p.length),0),F=[],M=1;M<x.length;M++)F.push(f(x[M]));var k=x.groups;if(v){var I=[w].concat(F,A,p);void 0!==k&&I.push(k);var P=String(e.apply(void 0,I))}else P=h(w,p,A,F,k,e);A>=C&&(E+=p.slice(C,A)+P,C=A+w.length)}return E+p.slice(C)}];function h(t,e,r,l,a,u){var o=r+t.length,s=l.length,c=v;return void 0!==a&&(a=i(a),c=p),n.call(u,c,(function(n,i){var u;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(o);case"<":u=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>s){var p=d(c/10);return 0===p?n:p<=s?void 0===l[p-1]?i.charAt(1):l[p-1]+i.charAt(1):n}u=l[c-1]}return void 0===u?"":u}))}}))},aa77:function(t,e,n){var r=n("5ca1"),i=n("be13"),l=n("79e5"),a=n("fdef"),u="["+a+"]",o="âÂ",s=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),d=function(t,e,n){var i={},u=l((function(){return!!a[t]()||o[t]()!=o})),s=i[t]=u?e(p):a[t];n&&(i[n]=s),r(r.P+r.F*u,"String",i)},p=d.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(s,"")),2&e&&(t=t.replace(c,"")),t};t.exports=d},aae3:function(t,e,n){var r=n("d3f4"),i=n("2d95"),l=n("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[l])?!!e:"RegExp"==i(t))}},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,n){var r=n("6821"),i=n("9def"),l=n("77f1");t.exports=function(t){return function(e,n,a){var u,o=r(e),s=i(o.length),c=l(a,s);if(t&&n!=n){while(s>c)if(u=o[c++],u!=u)return!0}else for(;s>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")((function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a}))},ca5a:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cb7c:function(t,e,n){var r=n("d3f4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},ebd6:function(t,e,n){var r=n("cb7c"),i=n("d8e8"),l=n("2b4c")("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[l])?e:i(n)}},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(r){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fae3:function(t,e,n){"use strict";var r;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));n("4f37"),n("57e7"),n("a481"),n("28a5"),n("6b54"),n("87b3");var i,l,a,u,o,s,c,d,p,v,f,b,h,m,g,y=0,x=0,S="MOVE",E=6,C=1,N=4,w=.02,A=[],F=/Mac/.test(navigator.platform),M=!1,k="_",I=75,P="Verdana",L=10,H=!1,T=!1,O=!1,B={61:"=",106:"*",107:"+",109:"-",110:".",111:"/",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},V={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',"[":"{","]":"}",",":"<",".":">","/":"?","\\":"|"};function _(t){s=new Image,A=[],I=75,P="Verdana",S;var e=parseInt(t.attributes["data-width"].value),n=parseInt(t.attributes["data-height"].value);s.src=t.attributes["data-image"].value;var r=this;s.onload=function(i){c={top:t.offsetTop,left:t.offsetLeft},y=0,x=0;var d=e/n,p=s.width/s.height;o=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.setAttributeNS(null,"id","svgLayer"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttributeNS(null,"version","1.1"),o.setAttributeNS(null,"style","position: inherit;"),o.setAttributeNS(null,"width",e),o.setAttributeNS(null,"height",n),t.appendChild(o),u=(d>=1&&p>=1||d<=1&&p<=1)&&p<=d||p<=1&&d>=1?o.height.baseVal.value/s.height:o.width.baseVal.value/s.width,l=u,a=(E/l).toString(),m=u*s.width/2,g=u*s.height/2;var v=document.createElementNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"id","xlt"),v.setAttributeNS(null,"transform","translate(0,0)scale("+parseFloat(l)+")"),o.appendChild(v);var f=document.createElementNS("http://www.w3.org/2000/svg","image");f.setAttributeNS(null,"id","xltImage"),f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y","0"),f.setAttributeNS(null,"width",s.width.toString()),f.setAttributeNS(null,"height",s.height.toString()),f.setAttributeNS(null,"preserveAspectRatio","none"),f.setAttributeNS("http://www.w3.org/1999/xlink","href",s.src),v.appendChild(f),_.prototype.buildSVGmenu(t),document.onkeydown=r.keyHandler(),document.onkeyup=r.keyUpHandler(),kt(0,0,l),Ct("MOVE"),r.renderFunction=r.updateSvgByElement,r.touchSupported="ontouchstart"in document.documentElement,r.containerID=t,r.lastMousePoint={x:0,y:0},r.touchSupported?(r.mouseDownEvent="touchstart",r.mouseMoveEvent="touchmove",r.mouseUpEvent="touchend"):(r.mouseDownEvent="mousedown",r.mouseMoveEvent="mousemove",r.mouseUpEvent="mouseup",o.ondblclick=r.doubleClickHandler()),o.onmousedown=r.onSvgMouseDown(),r.mouseMoveHandler=r.onSvgMouseMove,r.mouseUpHandler=r.onSvgMouseUp,o.onmouseup=r.mouseUpHandler(),o.onmousemove=r.mouseMoveHandler()}}function j(t,e){return parseInt(t)+", "+parseInt(e)}function G(t,e){return j(t,e)+", "}function D(t,e,n,r,i,l,a,u){return"cubic"==S?"M "+j(t,e)+" C "+G(n,r)+G(i,l)+j(a,u):"M "+j(t,e)+" Q "+G(n,r)+j(a,u)}function R(t){for(var e=t.replace(/,/g,"").split(" "),n=0,r=[],i=0;i<e.length;i++)bt(e[i])&&(r[n]=e[i],n++);return r}function U(t){return G(t[0],t[1])+" "+G(t[2],t[3])+" "+G(t[4],t[5])+" "+G(t[6],t[7])}function z(t){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return e.setAttributeNS(null,"stroke",i),e.setAttributeNS(null,"stroke-width",C),e.setAttributeNS(null,"stroke-opacity","0.9"),e.setAttributeNS(null,"fill",""),e.setAttributeNS(null,"fill-opacity","0.0"),e.setAttributeNS(null,"stroke-linecap","round"),e}function $(t){return t.setAttributeNS(null,"onmouseover","this.attributes['stroke-width'].value = '"+1.5*C+"';"),t.setAttributeNS(null,"onmouseout","this.attributes['stroke-width'].value = "+C+";"),t}function Z(t){var e=f?f.id:"null",n=b?b.tagName:"null",r=b?b.parentElement.id:"null";Gt(O,"mouseenter eventTarget="+t.target.id+" thisGroup="+e+" thisElement="+n+" parent="+r+" "+S+" "),W(t.target)}function q(t){var e=f?f.id:"null",n=b?b.tagName:"null",r=b?b.parentElement.id:"null";Gt(O,"mouseleave eventTarget="+t.target.id+" thisGroup="+e+" thisElement="+n+" parent="+r+" "+S+" "),J(t.target)}function K(t){return null!=t&&void 0!=t||(t=null),t.removeEventListener("mouseenter",Z),t.removeEventListener("mouseleave",q),t.addEventListener("mouseenter",Z),t.addEventListener("mouseleave",q),t}function W(t){if(Y(t))Gt(O,"Element conflict: "+t.attributes.class.value);else{if(Gt(O,"setEditElement no conflict"),null==f){var e="thisGroup is NULL";b&&(e+=", thisElement = "+b.toString()),Gt(O,t.attributes.class.value+" "+e),f=t}S,t.firstChild&&("path"!=t.firstChild.tagName?S=t.attributes.class?t.attributes.class.value:t.firstChild.tagName:(S="cubic",-1==t.firstChild.attributes.d.value.indexOf("C ")&&(S="quadratic"))),T=!1,_t(S),t.childNodes.length>1&&"g"==t.lastChild.tagName&&J(t);var n=it(t);t.appendChild(n),Gt(O,"setEditElement "+t.id+" "+t.attributes.class.value)}}function J(t){var e=f?f.id:"null";Gt(O,"clearEditElement: svgInProgress="+T+", group="+t.id+", thisGroup="+e),"SHIFT"!=T&&(t?H?Gt(O,"clearEditElement: waitElement"):f&&e!=t.id?Gt(O,"clearEditElement: group conflict"):(t.childNodes.length>1&&("circle"==t.lastChild.tagName||"g"==t.lastChild.tagName?(t.lastChild.remove(),h=null,S="MOVE",_t(S),T=!1,b=null,f=null):"text"==t.firstChild.tagName&&"text"==T&&Lt()),K(t),S="MOVE",_t(S),T=!1,b=null,f=null):Gt(O,"clearEditElement: group argument null"))}function Y(t){return H?(Gt(O,"checkElementConflict1: waitElement = "+H),!0):T?"SHIFT"==T?(Gt(O,"checkElementConflict3: svgInProgress="+T+"thisGroup="+t.id),f.id!=t.id):T!=t.firstChild.tagName?(Gt(O,"checkElementConflict4: svgInProgress="+T+", thisElement="+b+", group element="+t.firstChild.tagName),!0):f!=t?(Gt(O,"checkElementConflict5: svgInProgress="+T+", thisGroup="+f.id+", group="+t.id+", group element="+t.firstChild.tagName),!0):void 0:(Gt(O,"checkElementConflict2: svgInProgress="+T+"thisGroup="+t.id),!1)}function Q(t){null==t&&Gt(O,"fault");while(t.childElementCount>1&&"g"==t.lastChild.tagName)t.lastChild.remove();T=!1,h=null,Ct("MOVE"),K(t)}function X(t){f||(f=t.parentNode.parentNode),b=f.firstChild,h=f.children[1].children["shift"],S=b.tagName,f.attributes.class&&(S=f.attributes.class.value);for(var e=f.lastChild.childElementCount,n=e;n>1;n--)f.lastChild.lastChild.remove();f.removeEventListener("mouseenter",Z),f.removeEventListener("mouseleave",q),T="SHIFT",Gt(O,"svgInProgress = SHIFT, cursorMode = "+S)}function tt(t){var e=t.parentNode.parentNode;if(f=e,b=e.firstChild,h=e.lastChild.firstChild,S=b.tagName,"circle"==S||"ellipse"==S)for(var n=e.lastChild.childElementCount,r=n;r>0;r--)e.lastChild.lastChild.remove();T="SIZE",Gt(O,"svgInProgress = SIZE, cursorMode = "+S+" "+b.tagName),e.removeEventListener("mouseenter",Z),e.removeEventListener("mouseleave",q)}function et(t){h=t;var e=t.parentNode.parentNode;f=e,b=e.firstChild,parseInt(t.id)==t.parentNode.childElementCount-1&&(h=t),"g"==t.parentNode.lastChild.tagName&&t.parentNode.lastChild.remove(),S=f.attributes.class?f.attributes.class.value:b.tagName,e.removeEventListener("mouseenter",Z),e.removeEventListener("mouseleave",q),t.removeEventListener("mousedown",(function(t){})),T="POINT"}function nt(t){if(h==t);h=t;var e=t.parentNode.parentNode.parentNode;f=e,b=e.firstChild,parseInt(t.id)==t.parentNode.childElementCount-1&&(h=t),S=b.tagName,e.removeEventListener("mouseenter",Z),e.removeEventListener("mouseleave",q),b.attributes["points"].value=rt(b,h),h.id=(parseInt(h.id)+1).toString(),T="NEW"}function rt(t,e){for(var n=t.attributes["points"].value.trim().split(" "),r="",i=parseInt(e.id),l=e.attributes["cx"].value+","+e.attributes["cy"].value,a=0;a<n.length;a++)r+=n[a]+" ",a==i&&(r+=l+" ");return r}function it(t){var e,n,r,i,l,a={};t||Gt(O,"group arg null, thisGroup="+f);var u=t.firstChild;if(a=ft(u.tagName),"path"!=u.tagName)for(var o in a)a[o]=vt(u,o);var s=document.createElementNS("http://www.w3.org/2000/svg","g");switch(u.tagName){case"circle":s.setAttributeNS(null,"class","bubbles");var c=a["cx"],d=a["cy"],p=a["r"];return s.appendChild(lt(c,d,"shift")),s.appendChild(at(p+c,d,"E")),s.appendChild(at(c,p+d,"S")),s.appendChild(at(c-p,d,"W")),s.appendChild(at(c,d-p,"N")),s;case"ellipse":c=a["cx"],d=a["cy"];var v=a["rx"],b=a["ry"];return s.appendChild(lt(c,d,"shift")),s.appendChild(at(c+.707*v,d+.707*b,"SE")),s.appendChild(at(c+.707*v,d-.707*b,"NE")),s.appendChild(at(c-.707*v,d-.707*b,"NW")),s.appendChild(at(c-.707*v,d+.707*b,"SW")),s;case"rect":var h=a["x"],m=a["y"],g=a["width"],y=a["height"];return s.appendChild(lt(h,m,"shift")),s.appendChild(at(h+g,m+y)),s;case"line":var x=a["x1"],S=a["y1"],E=a["x2"],C=a["y2"];return s.appendChild(lt((E+x)/2,(C+S)/2,"shift")),s.appendChild(ut(x,S,"x1-y1")),s.appendChild(ut(E,C,"x2-y2")),s;case"path":var N,w,A=u.attributes["d"].value,F=A.indexOf("Q ")>0,M=R(A);return F&&(M[6]=M[4],M[7]=M[5],M[4]=M[2],M[5]=M[3]),F?(N=parseFloat(M[0])+parseFloat(M[2])+parseFloat(M[6]),w=parseFloat(M[1])+parseFloat(M[3])+parseFloat(M[7]),N=(N/3).toFixed(3),w=(w/3).toFixed(3)):(N=parseFloat(M[0])+parseFloat(M[2])+parseFloat(M[4])+parseFloat(M[6]),w=parseFloat(M[1])+parseFloat(M[3])+parseFloat(M[5])+parseFloat(M[7]),N=(N/4).toFixed(3),w=(w/4).toFixed(3)),s.appendChild(dt(M)),s.appendChild(lt(N,w,"shift")),s.appendChild(ct(M[0],M[1],M[2],M[3],"l1")),s.appendChild(ct(M[4],M[5],M[6],M[7],"l2")),s.appendChild(st(M[0],M[1],"p1")),s.appendChild(st(M[6],M[7],"p2")),s.appendChild(st(M[2],M[3],"c1")),F||s.appendChild(st(M[4],M[5],"c2")),s;case"polygon":case"polyline":var k=u.attributes["points"].value.trim();r=k.split(" ");var I=r[0].split(",");e=parseFloat(I[0]),n=parseFloat(I[1]);for(var P,L=0,H=0,T=0;T<r.length;T++)L+=e,H+=n,T<r.length-1&&(P=r[T+1].split(","),i=parseFloat(P[0]),l=parseFloat(P[1]),e=i,n=l);e=L/r.length,n=H/r.length,s.appendChild(lt(e,n,"shift"));var B=document.createElementNS("http://www.w3.org/2000/svg","g");e=parseFloat(I[0]),n=parseFloat(I[1]);for(var V=0;V<r.length;V++)s.appendChild(ut(e,n,V.toString())),V<r.length-1&&(P=r[V+1].split(","),i=parseFloat(P[0]),l=parseFloat(P[1]),B.appendChild(ot(.5*(e+i),.5*(n+l),V.toString()+".5")),e=i,n=l);if("polygon"==u.tagName){I=r[0].split(","),e=parseFloat(I[0]),n=parseFloat(I[1]);var _=(r.length-1).toString()+".5";B.appendChild(ot(.5*(e+i),.5*(n+l),_))}return s.appendChild(B),s;case"text":return e=a["x"],n=a["y"],s.appendChild(lt(e,n,"shift")),s}}function lt(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"r",1.25*a),r.setAttributeNS(null,"stroke","#004477"),r.setAttributeNS(null,"fill-opacity","1.0"),r.addEventListener("mousedown",(function(t){X(r)})),r.addEventListener("mouseup",(function(t){K(r)})),r.setAttributeNS(null,"style","cursor:move;"),r.setAttributeNS(null,"id",n),r}function at(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"fill-opacity","0.6"),r.addEventListener("mousedown",(function(t){tt(r)})),r.setAttributeNS(null,"id",n),r}function ut(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"fill-opacity","0.6"),r.setAttributeNS(null,"id",n),r.addEventListener("mousedown",(function(t){et(r)})),r.addEventListener("mouseup",(function(t){Q(f)})),r}function ot(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"r",.8*a),r.setAttributeNS(null,"stroke","#555555"),r.setAttributeNS(null,"stroke-opacity","0.6"),r.setAttributeNS(null,"fill-opacity","0.4"),r.addEventListener("mousedown",(function(t){nt(r)})),r.addEventListener("mouseup",(function(t){Q(f)})),r.setAttributeNS(null,"id",n),r}function st(t,e,n){var r=pt(t,e);return r.setAttributeNS(null,"stroke","#333333"),r.setAttributeNS(null,"stroke-opacity","0.6"),r.setAttributeNS(null,"fill-opacity","0.8"),r.addEventListener("mousedown",(function(t){et(r)})),r.addEventListener("mouseup",(function(t){Q(t.target.parentElement.parentElement)})),r.setAttributeNS(null,"id",n),r}function ct(t,e,n,r,i){var l=z("line");return l.setAttributeNS(null,"x1",t),l.setAttributeNS(null,"y1",e),l.setAttributeNS(null,"x2",n),l.setAttributeNS(null,"y2",r),l.setAttributeNS(null,"id",i),l.setAttributeNS(null,"stroke-width","1"),l}function dt(t){var e=z("polyline");return e.setAttributeNS(null,"id","poly"),e.setAttributeNS(null,"points",U(t)),e.setAttributeNS(null,"stroke-opacity","0.0"),e}function pt(t,e){var n=z("circle");return isNaN(t)&&alert("offsetX: "+t.toString()),isNaN(e)&&alert("offsetY: "+e.toString()),n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r",a),n.setAttributeNS(null,"fill","#FFFFFF"),n.setAttributeNS(null,"stroke","#222222"),n.setAttributeNS(null,"stroke-width",.25*a),n}function vt(t,e){return parseFloat(parseFloat(t.attributes[e].value).toFixed(1))}function ft(t){var e=0,n=0,r=1,i=1;switch(t){case"polyline":return{points:r};case"polygon":return{points:r};case"rect":return{x:e,y:n,width:r,height:i};case"line":return{x1:e,y1:n,x2:r,y2:i};case"circle":return{cx:e,cy:n,r:r};case"ellipse":return{cx:e,cy:n,rx:r,ry:i};case"path":return{x1:e,y1:n,xc1:r,yc1:i,xc2:r,yc2:i,x2:e,y2:n};case"text":return{x:e,y:n}}}function bt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function ht(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}_.prototype.onSvgMouseDown=function(){var t=this;return function(e){if(t.updateMousePosition(e),0!=T&&T!=S)return"SHIFT"==T?void 0:void(T=S);if(f&&f.childElementCount>1&&"text"!=S)return J(f),!1;if("polygon"==S)if(0==T){S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var n=document.createElementNS("http://www.w3.org/2000/svg","g"),r="g"+document.getElementById("xlt").childElementCount.toString();n.setAttributeNS(null,"id",r),n.setAttributeNS(null,"class",S),f=n,document.getElementById("xlt").appendChild(n);var a=z("polyline");n.appendChild(a),b=n.children[0],a.setAttributeNS(null,"points",A[0][0].toFixed(3).toString()+","+A[0][1].toFixed(3).toString()+" "+A[0][0].toFixed(3).toString()+","+A[0][1].toFixed(3).toString()+" "),T=S}else{t.updateMousePosition(e);var u=b.attributes["points"].value,o=((m-y)/l).toFixed(3).toString()+","+((g-x)/l).toFixed(3).toString()+" ";b.attributes["points"].value=u.concat(o)}if("polyline"==S)if(0==T){S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var s=document.createElementNS("http://www.w3.org/2000/svg","g");f=s;var c="g"+document.getElementById("xlt").childElementCount.toString();s.setAttributeNS(null,"id",c),s.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(s);var d=z("polyline");s.appendChild(d),b=s.children[0],d.setAttributeNS(null,"stroke-linecap","round"),d.setAttributeNS(null,"points",A[0][0].toFixed(3).toString()+","+A[0][1].toFixed(3).toString()+" "+A[0][0].toFixed(3).toString()+","+A[0][1].toFixed(3).toString()+" "),T=S}else{t.updateMousePosition(e);var p=b.attributes["points"].value,v=((m-y)/l).toFixed(3).toString()+","+((g-x)/l).toFixed(3).toString()+" ";b.attributes["points"].value=p.concat(v)}if("rect"==S&&0==T){S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var h=document.createElementNS("http://www.w3.org/2000/svg","g"),E="g"+document.getElementById("xlt").childElementCount.toString();h.setAttributeNS(null,"id",E),h.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(h);var C=z("rect");h.appendChild(C),f=h,b=h.children[0],C.setAttributeNS(null,"x",A[0][0]),C.setAttributeNS(null,"y",A[0][1]),C.setAttributeNS(null,"width",1),C.setAttributeNS(null,"height",1),T=S}if("line"==S)if(0==T){S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var N=document.createElementNS("http://www.w3.org/2000/svg","g");f=N;var w="g"+document.getElementById("xlt").childElementCount.toString();N.setAttributeNS(null,"id",w),N.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(N);var F=z("line");N.appendChild(F),b=N.children[0],F.setAttributeNS(null,"x1",A[0][0]),F.setAttributeNS(null,"y1",A[0][1]),F.setAttributeNS(null,"x2",A[0][0]),F.setAttributeNS(null,"y2",A[0][1]),T=S}else T=!1,K(b);if("arrow"==S)if(0==T){S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var M=document.createElementNS("http://www.w3.org/2000/svg","g");f=M;var k="g"+document.getElementById("xlt").childElementCount.toString();M.setAttributeNS(null,"id",k),M.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(M);var L=z("line");M.appendChild(L),b=M.children[0],L.setAttributeNS(null,"x1",A[0][0]),L.setAttributeNS(null,"y1",A[0][1]),L.setAttributeNS(null,"x2",A[0][0]),L.setAttributeNS(null,"y2",A[0][1]),T=S}else T=!1,K(b);if("circle"==S&&0==T){null!=f&&J(f),S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var O=document.createElementNS("http://www.w3.org/2000/svg","g"),B="g"+document.getElementById("xlt").childElementCount.toString();O.setAttributeNS(null,"id",B),O.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(O);var V=z(S);O.appendChild(V),f=O,b=O.children[0],V.setAttributeNS(null,"cx",A[0][0]),V.setAttributeNS(null,"cy",A[0][1]),V.setAttributeNS(null,"r",1),T=S}if("ellipse"==S)if(0==T){S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var _=document.createElementNS("http://www.w3.org/2000/svg","g");f=_;var j="g"+document.getElementById("xlt").childElementCount.toString();_.setAttributeNS(null,"id",j),_.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(_);var G=z("ellipse");_.appendChild(G),b=_.children[0],G.setAttributeNS(null,"cx",A[0][0]),G.setAttributeNS(null,"cy",A[0][1]),G.setAttributeNS(null,"rx",1),G.setAttributeNS(null,"ry",1),T=S}else T=!1,K(b);if("draw"==S)if(0==T){S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var R=document.createElementNS("http://www.w3.org/2000/svg","g");f=R;var U="g"+document.getElementById("xlt").childElementCount.toString();R.setAttributeNS(null,"id",U),R.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(R);var Z=z("polyline");R.appendChild(Z),b=R.children[0],Z.setAttributeNS(null,"points",A[0][0].toFixed(3).toString()+","+A[0][1].toFixed(3).toString()+" "),T=S}else T=!1,$(b);if("cubic"==S||"quadratic"==S)if(0==T){S,A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l];var q=document.createElementNS("http://www.w3.org/2000/svg","g");f=q;var W="g"+document.getElementById("xlt").childElementCount.toString();q.setAttributeNS(null,"id",W),q.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(q);var Y=z("path");q.appendChild(Y),b=q.children[0];var Q=A[0][0],X=A[0][1];Y.setAttributeNS(null,"d",D(Q,X,Q,X,Q,X,Q,X)),T=S}else T=!1,K(b);var tt;if("text"==S&&(b&&Lt(),0==T)){A[0]=[(t.lastMousePoint.x-y)/l,(t.lastMousePoint.y-x)/l],S,tt=document.createElementNS("http://www.w3.org/2000/svg","g"),f=tt;var et,nt="g"+document.getElementById("xlt").childElementCount.toString();tt.setAttributeNS(null,"id",nt),tt.setAttributeNS(null,"class",S),document.getElementById("xlt").appendChild(tt),et=document.createElementNS("http://www.w3.org/2000/svg","text"),tt.appendChild(et),b=tt.children[0],et.setAttributeNS(null,"stroke",i),et.setAttributeNS(null,"stroke-width","1"),et.setAttributeNS(null,"stroke-opacity","1.0"),et.setAttributeNS(null,"x",A[0][0]),et.setAttributeNS(null,"y",A[0][1]),et.setAttributeNS(null,"style","font-family: "+P+"; fill: "+i.toString()+";"),et.setAttributeNS(null,"font-size",I),et.innerHTML="_",T="text"}return"MOVE"==S&&0==T&&(T=S),H=!1,e.preventDefault()&&!1}},_.prototype.onSvgMouseMove=function(){var t=this;return function(e){return t.renderFunction(e),e.preventDefault(),!1}};function mt(t){var e=t.key,n=t.keyCode,r=(t.charCode,t.shiftKey);t.ctrlKey;if(20==n)return M=!M,!1;var i=B[n];return i?r&&V[i]?V[i]:i:n>47&&n<58?(e=String.fromCharCode(n),r?V[e]:e):(n>63&&n<91||32==n)&&(e=String.fromCharCode(n),M?F?e.toUpperCase():r?e.toLowerCase():e.toUpperCase():r?e:e.toLowerCase())}function gt(){T=!1,K(f),Ct("MOVE"),h=null,b=null,f=null}function yt(){if("polygon"==S||"polyline"==S){switch(T=!1,S){case"polygon":xt(b),f.innerHTML=f.innerHTML.replace("polyline","polygon").replace("polyline","polygon"),K(f);break;case"polyline":xt(b),K(f);break}"text"==S&&Tt(),b=null,f=null}}function xt(t){var e=t.attributes["points"].value.trim(),n=e.split(" ");e=n[0]+" ";for(var r=1;r<n.length;r++)Et(n[r-1],n[r])&&(e+=n[r]+" ");b.attributes["points"].value=e}function St(t){var e=t.attributes["points"].value.trim(),n=e.split(" ");e=n[0]+" ";for(var r=1;r<n.length-1;r++)n[r]!=n[r-1]&&(e+=n[r]+" ");b.attributes["points"].value=e}function Et(t,e){var n=t.split(","),r=e.split(","),i=n[0],l=n[1],a=r[0],u=r[1];return!(Math.abs(i-a)<1e-6*a&&Math.abs(l-u)<1e-6*u)}function Ct(t){b&&(Nt(),J(f)),"MOVE"==t.toUpperCase()?(S=t,Gt(O,"@setCursorMode1 cursorMode = "+S)):(S=t.toLowerCase(),"rectangle"==t&&(S="rect",Gt(O,"@setCursorMode2 cursorMode = "+S)),"clear"==t&&(wt(),S="MOVE"),"reset"==t&&(kt(0,0,u),S="MOVE")),"MOVE","MOVE"!=S.toUpperCase()&&(H=!0,Gt(O,"@setCursorMode3 waitElement = "+S)),_t(S),T=!1}function Nt(){switch(S){case"polyline":case"polygon":break;case"circle":if(null==b)return;(b.attributes["cy"].value-b.attributes["r"].value<0||b.attributes["r"].value<2)&&wt();break;case"ellipse":if(null==b)return;b.attributes["cy"].value-b.attributes["ry"].value<0&&wt();break;case"rect":if(null==b)return;b.attributes["height"].value<0&&wt();break;case"line":b.attributes["y2"].value<0&&wt();break;case"text":Lt();break}}function wt(){var t=document.getElementById("xlt");t.childElementCount>1&&t.lastChild.remove()}function At(t){t&&t.remove()}function Ft(){if(l<N){var t=l*(1+w);t>N&&(t=N),y=m-(m-y)*t/l,x=g-(g-x)*t/l,kt(y,x,t),l=t,a=(E/l).toString(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}}function Mt(){if(l>u/3){var t=l/(1+w);y=m-(m-y)*t/l,x=g-(g-x)*t/l,kt(y,x,t),l=t,a=(E/l).toString(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}}function kt(t,e,n){var r=document.getElementById("xlt"),i="translate("+t.toString()+", "+e.toString()+")scale("+n.toString()+")";l=n,y=t,x=e,r.attributes["transform"].value=i,document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}function It(t){p=t.key;var e,n=t.keyCode;if(p=mt(t),null==b)return 8==n&&t.preventDefault(),!1;if(13==t.keyCode&&t.shiftKey)return Lt(),!1;if(e=k.slice(0,k.length-1),n>31&&(k=e+p+"_"),8==n&&(k=e.slice(0,e.length-1)+"_",t.preventDefault()),p||13==n||8==n){b.innerHTML=Pt(k),b.attributes["stroke"].value=i,b.attributes["style"].value="font-family: "+P+"; fill: "+i+";",b.attributes["font-size"].value=I;var r=b.attributes["x"].value,l=parseInt(b.attributes["y"].value)+parseInt(I),a=b.cloneNode();13==t.keyCode&&(b.innerHTML=Pt(e.slice(0,e.length)),a.attributes["x"].value=r,a.attributes["y"].value=l,b.parentElement.appendChild(a),b=a,b.innerHTML="_",k="_",t.preventDefault())}}function Pt(t){var e=t.replace(/  /g," &nbsp;");return e=e.replace(/</g,"&lt;").replace(/>/g,"&gt"),e}function Lt(){if(Ht(),f){if(f.hasChildNodes())K(f);else{f.remove()}Tt(),f=null}}function Ht(){if(b&&b.parentElement)if("_"==b.parentElement.lastChild.innerHTML)b.parentElement.lastChild.remove(),k="_",b=null;else if("text"==T){if(b.innerHTML=Pt(k.slice(0,k.length-1)),""==b.innerHTML){b.remove(),b=null}if("g"==f.lastChild.tagName){f.lastChild.remove}}}function Tt(){k="_",A=[],b=null,T=!1}function Ot(t){i=t,document.getElementById("cursorColor").attributes["style"].value="background-color: "+i}function Bt(t){var e=document.getElementById("selectUserColor");e.attributes["style"].value="background-color: "+t,e.blur()}function Vt(){return document.getElementById("userColor").value}function _t(t){var e=t;"rect"==t&&(e="rectangle"),document.getElementById("mode").textContent=e.toUpperCase(),document.getElementById("zoom").innerHTML="Zoom:"+l.toFixed(3)}function jt(t){var e,n,r=o.cloneNode(!0),i=r.firstChild;t||(r.removeAttribute("height"),r.removeAttribute("width"),r.firstChild.attributes["transform"].value="translate(0, 0)scale(1)",i.children["xltImage"].remove());var l,a,u=i.childElementCount,s=1;for(l=1;l<u;l++)n=i.childNodes[s],s++,t||(n.attributes.class?n.removeAttribute("id"):(s--,a=n.childElementCount,e=i.children[s].innerHTML,i.children[s].outerHTML=e,s+=a));return t||(e=i.firstChild.outerHTML.replace("<image","\x3c!--image").replace("/image>","/image--\x3e"),i.firstChild.outerHTML=e),r}function Gt(t,e){return!!t&&(console.log(e),!0)}function Dt(){I=document.getElementById("textHeight").value}_.prototype.updateMousePosition=function(t){var e;e=this.touchSupported?t.originalEvent.touches[0]:t;var n=c;this.lastMousePoint.x=e.pageX-n.left,this.lastMousePoint.y=e.pageY-n.top,m=this.lastMousePoint.x,g=this.lastMousePoint.y},_.prototype.updateSvgByElement=function(t){if("MOVE"!=S){if("polygon"==S||"polyline"==S&&"polygon"==T){if(0==T)return;if(this.updateMousePosition(t),"SHIFT"==T){((m-y)/l).toFixed(3).toString(),((g-x)/l).toFixed(3).toString();var e=b.attributes["points"].value.trim(),n=e.split(" ");if(null!=h){var r=parseFloat(h.attributes["cx"].value),i=parseFloat(h.attributes["cy"].value),a=(m-y)/l,u=(g-x)/l,o=a-r,s=u-i;h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l;var c,d="",p=[],v=[];for(c=0;c<n.length;c++){var E=n[c].split(",");p[c]=(parseFloat(E[0])+o).toFixed(3),v[c]=(parseFloat(E[1])+s).toFixed(3),d+=p[c]+","+v[c]+" "}for(var C=0;C<n.length;C++)e+=n[C]+" ";b.attributes["points"].value=d}}else{var N=((m-y)/l).toFixed(3).toString()+","+((g-x)/l).toFixed(3).toString(),w=b.attributes["points"].value.trim(),A=w.split(" ");if(null!=h){if(h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l,bt(h.id)){A[parseInt(h.id)]=N,w="";for(var F=0;F<A.length;F++)w+=A[F]+" ";b.attributes["points"].value=w}}else{w="";for(var M=0;M<A.length-1;M++)w+=A[M]+" ";N+=" ",b.attributes["points"].value=w.concat(N)}}}else if("polyline"==S){if(0==T)return;if(this.updateMousePosition(t),"SHIFT"==T){((m-y)/l).toFixed(3).toString(),((g-x)/l).toFixed(3).toString();var k=b.attributes["points"].value.trim(),P=k.split(" ");if(null!=h){var H=parseFloat(h.attributes["cx"].value),B=parseFloat(h.attributes["cy"].value),V=(m-y)/l,_=(g-x)/l,$=V-H,Z=_-B;h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l;var q,K="",W=[],J=[];for(q=0;q<P.length;q++){var Y=P[q].split(",");W[q]=(parseFloat(Y[0])+$).toFixed(3),J[q]=(parseFloat(Y[1])+Z).toFixed(3),K+=W[q]+","+J[q]+" "}for(var Q=0;Q<P.length;Q++)k+=P[Q]+" ";b.attributes["points"].value=K}}else{var X=((m-y)/l).toFixed(3).toString()+","+((g-x)/l).toFixed(3).toString(),tt=b.attributes["points"].value.trim(),et=tt.split(" ");if(null!=h){if(h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l,bt(h.id)){et[parseInt(h.id)]=X,tt="";for(var nt=0;nt<et.length;nt++)tt+=et[nt]+" ";b.attributes["points"].value=tt}}else{tt="";for(var rt=0;rt<et.length-1;rt++)tt+=et[rt]+" ";X+=" ",b.attributes["points"].value=tt.concat(X)}}}else if("rect"==S){if(0==T)return;if("SHIFT"==T)this.updateMousePosition(t),h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l,b.attributes["x"].value=(m-y)/l,b.attributes["y"].value=(g-x)/l;else{var it=b.attributes["x"].value,lt=b.attributes["y"].value;this.updateMousePosition(t),b.attributes["width"].value=(m-y)/l-it,b.attributes["height"].value=(g-x)/l-lt,h&&(h=t.target,h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l)}}else if("line"==S){var at;if(m=this.lastMousePoint.x,g=this.lastMousePoint.y,"mousedown"==t.type||0==T)return void Gt(O,"cursorMode=line abort event:"+t.type+" svgInProgress= "+T);if("SHIFT"==T){this.updateMousePosition(t);var ut=parseFloat(b.attributes["x1"].value),ot=parseFloat(b.attributes["y1"].value),st=parseFloat(b.attributes["x2"].value),ct=parseFloat(b.attributes["y2"].value),dt=parseFloat(h.attributes["cx"].value),pt=parseFloat(h.attributes["cy"].value),vt=(m-y)/l,ft=(g-x)/l,mt=dt-vt,gt=ft-pt;h&&(h.attributes["cx"].value=vt,h.attributes["cy"].value=ft,b.attributes["x1"].value=ut-mt,b.attributes["y1"].value=gt+ot,b.attributes["x2"].value=st-mt,b.attributes["y2"].value=gt+ct)}else this.updateMousePosition(t),at=["x2","y2"],null!=h&&(h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l,bt(h.id)||(at=h.id.split("-")),"shift"==f.lastChild.firstChild.id&&f.lastChild.firstChild.remove()),b.attributes[at[0]].value=(m-y)/l,b.attributes[at[1]].value=(g-x)/l,Gt(O,"x: "+((m-y)/l).toString()+" / y: "+((g-x)/l).toString())}else if("arrow"==S){var yt;if(m=this.lastMousePoint.x,g=this.lastMousePoint.y,"mousedown"==t.type||0==T)return;var xt=f.children[0];if(this.updateMousePosition(t),"SHIFT"==T){var St=parseFloat(xt.attributes["x1"].value),Et=parseFloat(xt.attributes["y1"].value),Ct=parseFloat(xt.attributes["x2"].value),Nt=parseFloat(xt.attributes["y2"].value);h||(h=xt.parentElement.lastChild.children["shift"]);var wt=parseFloat(h.attributes["cx"].value),At=parseFloat(h.attributes["cy"].value),Ft=(m-y)/l,Mt=(g-x)/l,It=wt-Ft,Pt=Mt-At;h.attributes["cx"].value=Ft,h.attributes["cy"].value=Mt,xt.attributes["x1"].value=St-It,xt.attributes["y1"].value=Pt+Et,xt.attributes["x2"].value=Ct-It,xt.attributes["y2"].value=Pt+Nt}else yt=["x2","y2"],null!=h&&(h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l,bt(h.id)||(yt=h.id.split("-"))),xt.attributes[yt[0]].value=(m-y)/l,xt.attributes[yt[1]].value=(g-x)/l;while(f.childElementCount>1)f.lastChild.remove();var Lt=b.attributes["x1"].value,Ht=b.attributes["y1"].value,Tt=b.attributes["x2"].value,Ot=b.attributes["y2"].value,Bt=b.attributes["stroke"].value,Vt=Tt-Lt,_t=Ot-Ht,jt=Math.sqrt(Vt*Vt+_t*_t);0==jt&&(jt=1);var Dt,Rt=Vt/jt,Ut=_t/jt;Dt=document.getElementById("arrowHeadPixels").checked?document.getElementById("arrowHeadLength").value:jt*L/100;var zt=parseFloat(Tt)-Rt*Dt,$t=parseFloat(Ot)-Ut*Dt,Zt=(zt+Dt*Ut/2).toFixed(3),qt=($t-Dt*Rt/2).toFixed(3),Kt=(zt-Dt*Ut/2).toFixed(3),Wt=($t+Dt*Rt/2).toFixed(3),Jt=z("line");Jt.setAttributeNS(null,"x1",Tt),Jt.setAttributeNS(null,"y1",Ot),Jt.setAttributeNS(null,"x2",Zt),Jt.setAttributeNS(null,"y2",qt),Jt.setAttributeNS(null,"stroke",Bt);var Yt=z("line");if(Yt.setAttributeNS(null,"x1",Tt),Yt.setAttributeNS(null,"y1",Ot),Yt.setAttributeNS(null,"x2",Kt),Yt.setAttributeNS(null,"y2",Wt),Yt.setAttributeNS(null,"stroke",Bt),document.getElementById("arrowHeadClosed").checked){var Qt=z("polygon"),Xt=Tt+","+Ot+" "+Zt+","+qt+" "+Kt+","+Wt;Qt.setAttributeNS(null,"points",Xt),Qt.setAttributeNS(null,"stroke",Bt),f.appendChild(Qt)}else f.appendChild(Jt),f.appendChild(Yt)}else if("circle"==S){if("mousedown"==t.type||0==T)return;if("SHIFT"==T)this.updateMousePosition(t),h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l,b.attributes["cx"].value=(m-y)/l,b.attributes["cy"].value=(g-x)/l;else{var te=b.attributes["cx"].value,ee=b.attributes["cy"].value;this.updateMousePosition(t),m=this.lastMousePoint.x,g=this.lastMousePoint.y;var ne=ht(te,ee,(m-y)/l,(g-x)/l);if(b.attributes["r"].value=ne,h)switch(h=t.target,h.id){case"E":h.attributes["cx"].value=parseFloat(te)+ne;break;case"S":h.attributes["cy"].value=parseFloat(ee)+ne;break;case"W":h.attributes["cx"].value=parseFloat(te)-ne;break;case"N":h.attributes["cy"].value=parseFloat(ee)-ne;break}var re=t.target.parentElement.children;re["E"]&&(re["E"].attributes["cx"].value=parseFloat(te)+ne,re["S"].attributes["cy"].value=parseFloat(ee)+ne,re["W"].attributes["cx"].value=parseFloat(te)-ne,re["N"].attributes["cy"].value=parseFloat(ee)-ne)}}else if("ellipse"==S){if(m=this.lastMousePoint.x,g=this.lastMousePoint.y,"mousedown"==t.type||0==T)return;if("SHIFT"==T)this.updateMousePosition(t),h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l,b.attributes["cx"].value=(m-y)/l,b.attributes["cy"].value=(g-x)/l;else{var ie=b.attributes["cx"].value,le=b.attributes["cy"].value;this.updateMousePosition(t),m=this.lastMousePoint.x,g=this.lastMousePoint.y,b.attributes["rx"].value=1.414*Math.abs(ie-(m-y)/l),b.attributes["ry"].value=1.414*Math.abs(le-(g-x)/l)}}else if("draw"==S){if(0==T)return;if(this.updateMousePosition(t),"SHIFT"==T){((m-y)/l).toFixed(3).toString(),((g-x)/l).toFixed(3).toString();var ae=b.attributes["points"].value.trim(),ue=ae.split(" ");if(null!=h){var oe=parseFloat(h.attributes["cx"].value),se=parseFloat(h.attributes["cy"].value),ce=(m-y)/l,de=(g-x)/l,pe=ce-oe,ve=de-se;h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l;var fe,be="",he=[],me=[];for(fe=0;fe<ue.length;fe++){var ge=ue[fe].split(",");he[fe]=(parseFloat(ge[0])+pe).toFixed(3),me[fe]=(parseFloat(ge[1])+ve).toFixed(3),be+=he[fe]+","+me[fe]+" "}for(var ye=0;ye<ue.length;ye++)ae+=ue[ye]+" ";b.attributes["points"].value=be}}else{var xe=((m-y)/l).toFixed(3).toString()+","+((g-x)/l).toFixed(3).toString(),Se=b.attributes["points"].value.trim(),Ee=Se.split(" ");if(null!=h){if(h.attributes["cx"].value=(m-y)/l,h.attributes["cy"].value=(g-x)/l,bt(h.id)){Ee[parseInt(h.id)]=xe,Se="";for(var Ce=0;Ce<Ee.length;Ce++)Se+=Ee[Ce]+" ";b.attributes["points"].value=Se}}else{var Ne=b.attributes["points"].value,we=((m-y)/l).toFixed(3).toString()+","+((g-x)/l).toFixed(3).toString()+" ";b.attributes["points"].value=Ne.concat(we)}}}else if("cubic"==S||"quadratic"==S){if(m=this.lastMousePoint.x,g=this.lastMousePoint.y,"mousedown"==t.type||0==T)return;this.updateMousePosition(t);var Ae=b.attributes["d"].value,Fe=Ae.indexOf("Q ")>0;if(null!=h){var Me=(m-y)/l,ke=(g-x)/l,Ie=parseFloat(h.attributes["cx"].value),Pe=parseFloat(h.attributes["cy"].value);Gt(O,"endpoints: ["+Me+", "+ke+"], ["+Ie+", "+Pe+"]");var Le=Me-Ie,He=ke-Pe;h.attributes["cx"].value=Me,h.attributes["cy"].value=ke;var Te=R(Ae);if("shift"==h.id){Gt(O,Ae),Gt(O,"dx: "+Le+", dy: "+He);for(var Oe=0;Oe<Te.length;Oe++)Te[Oe]=(Le+parseFloat(Te[Oe])).toFixed(3),Te[Oe+1]=(He+parseFloat(Te[Oe+1])).toFixed(3),Oe++;Fe&&(Te[6]=Te[4],Te[7]=Te[5]),b.attributes["d"].value=D(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5],Te[6],Te[7]),Gt(O,b.attributes["d"].value)}else{switch(Fe&&(Te[6]=Te[4],Te[7]=Te[5]),h.id){case"p1":Te[0]=Me.toFixed(3),Te[1]=ke.toFixed(3);break;case"p2":Te[6]=Me.toFixed(3),Te[7]=ke.toFixed(3);break;case"c1":Te[2]=Me.toFixed(3),Te[3]=ke.toFixed(3);break;case"c2":Te[4]=Me.toFixed(3),Te[5]=ke.toFixed(3);break}Fe&&(Te[4]=Te[2],Te[5]=Te[3]),b.attributes["d"].value=D(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5],Te[6],Te[7]),b.parentElement.lastChild.children["l1"].attributes["x1"].value=Te[0],b.parentElement.lastChild.children["l1"].attributes["y1"].value=Te[1],b.parentElement.lastChild.children["l1"].attributes["x2"].value=Te[2],b.parentElement.lastChild.children["l1"].attributes["y2"].value=Te[3],b.parentElement.lastChild.children["l2"].attributes["x1"].value=Te[4],b.parentElement.lastChild.children["l2"].attributes["y1"].value=Te[5],b.parentElement.lastChild.children["l2"].attributes["x2"].value=Te[6],b.parentElement.lastChild.children["l2"].attributes["y2"].value=Te[7],b.parentElement.lastChild.children["poly"].attributes["points"].value=U(Te)+Te[0]+", "+Te[1]}}else{var Be,Ve=(m-y)/l,_e=(g-x)/l,je=" C ";"quadratic"==S&&(je=" Q ");var Ge=Ae.split(je),De=Ge[0].split("M ");De=De[1].split(", ");var Re=parseInt(De[0]),Ue=parseInt(De[1]),ze=Re-Ve,$e=Ue-_e,Ze=Ge[1].split(", ");" Q "==je?(Ze[0]=(Re-.4*ze).toFixed(3),Ze[1]=(Ue-.4*$e).toFixed(3),Be=Ge[0]+je+G(Ze[0],Ze[1])):(Ze[0]=(Re-.4*ze).toFixed(3),Ze[1]=(Ue-.4*$e).toFixed(3),Ze[2]=(Re-.6*ze).toFixed(3),Ze[3]=(Ue-.6*$e).toFixed(3),Be=Ge[0]+je+G(Ze[0],Ze[1]),Be+=G(Ze[2],Ze[3]),Be+=G(Ve,_e),Gt(O,"p1: "+De[0]+", "+De[1]),Gt(O,"control points: "+Ze[0]+", "+Ze[1]+" ... "+Ze[2]+", "+Ze[3]),Gt(O,"p2: "+Ve+", "+_e)),Be+=j(Ve,_e),b.attributes["d"].value=Be}}else if("text"==S&&"SHIFT"==T){this.updateMousePosition(t),h||(h=t.target);var qe=(m-y)/l,Ke=(g-x)/l;h.attributes["cx"].value=qe,h.attributes["cy"].value=Ke;for(var We=0;We<f.children.length;We++)"text"==f.children[We].tagName?(f.children[We].attributes["x"].value=qe,f.children[We].attributes["y"].value=Ke+We*I):(f.children[We].children[0].attributes["cx"].value=qe,f.children[We].children[0].attributes["cy"].value=Ke)}}else if("MOVE"==S&&"MOVE"==T){var Je=this.lastMousePoint.x,Ye=this.lastMousePoint.y;this.updateMousePosition(t),y-=Je-m,x-=Ye-g,kt(y,x,l)}return t.preventDefault()&&!1},_.prototype.onSvgMouseUp=function(t){return function(t){return T?("SHIFT"==T?(T=!1,J(f)):"SIZE"==T?(T=!1,K(b.parentNode)):"bubble"==S?T=!1:"draw"==S?(T=!1,K(f)):"cubic"==S||"quadratic"==S?(T=!1,K(f)):"MOVE"==S?T=!1:"rect"==S?(T=!1,K(f),h=null,b=null,f=null):"line"==S?(T=!1,K(f),h=null,b=null,f=null):"arrow"==S?(T=!1,K(f),h=null,b=null,f=null):"polygon"==S?null==h||(T=!1,K(f),h=null,b=null,f=null):"polyline"==S?null==h||(T=!1,K(f),h=null,b=null,f=null):"circle"==S?(T=!1,K(f),h=null,b=null,f=null):"ellipse"==S?(T=!1,K(f),h=null,b=null,f=null):"text"==S&&0==T&&("circle"==f.lastChild.tagName&&J(group),K(f)),A=[],!1):t.preventDefault()&&!1}},_.prototype.keyUpHandler=function(){return function(t){20==t.keyCode&&(M=!M)}},_.prototype.keyHandler=function(){return function(t){var e=t.keyCode,n=document.activeElement;switch(e){case 16:return p="Shift",v,void(v=p);case 20:return void(M=!M);case 93:return p="Meta",v,void(v=p);case 82:t.shiftKey&&(t.ctrlKey||t.metaKey)&&location.reload(!0);case 66:if(t.ctrlKey&&f){var r=f.cloneNode(!0);f.remove(),J(r),o.firstChild.insertBefore(r,o.firstChild.childNodes[1])}case 84:if(t.ctrlKey&&f){var i=f.cloneNode(!0);f.remove(),J(i),o.firstChild.appendChild(i)}default:null,v=p}if("text"!=S||"BODY"!=n.tagName&&n.id!=o.parentElement.id){if("Enter"==t.key||13==e)switch(S){case"polygon":return void yt();case"polyline":return void yt();case"line":return void gt();case"rectangle":return void gt();case"circle":return void gt();case"ellipse":return void gt();case"cubic":return void gt();case"quadratic":return void gt();case"draw":return void gt()}if("Delete"==t.key||"Backspace"==t.key||46==e||8==e){if(t.shiftKey)return At(f),T=!1,void Ct("MOVE");if("BODY"==n.tagName||n.id==o.parentElement.id)return void t.preventDefault()}if("Escape"!=t.key&&27!=e);else switch(S){case"polyline":if(T==S)return void St(b)}}else It(t)}},_.prototype.doubleClickHandler=function(){return function(){yt()}},_.prototype.mouseWheelScrollHandler=function(){return function(t){t.stopImmediatePropagation(),t.stopPropagation();var e=1e3;"DOMMouseScroll"==t.type&&(e=100);var n=-parseInt(t.deltaY||-t.detail);m=t.clientX-c.left,g=t.clientY-c.top;var r=n/e;return r>0?Ft():Mt(),t.preventDefault()&&!1}},_.prototype.setMode=function(t){Ct(t)},_.prototype.showSVG=function(t){d.children["textSVGorJSON"].textContent=jt(t).outerHTML},_.prototype.jsonSVG=function(t){var e=jt(!1).firstChild;e.removeAttribute("id"),e.removeAttribute("transform");var n={data:{type:"svg",attributes:e.outerHTML}};return d.children["textSVGorJSON"].textContent=JSON.stringify(n),n},_.prototype.buildSVGmenu=function(t){t.attributes["data-buttons"]&&function(){var e,n,r,l=JSON.parse(t.attributes["data-buttons"].value).buttons;for(d=document.createElement("div"),d.setAttribute("id","svgMenu"),t.parentElement.appendChild(d),r=0;r<l.length;r++){var a=l[r].function,u=l[r].value;(function(){switch(a){case"clear":case"polygon":case"polyline":case"line":case"arrow":case"rectangle":case"circle":case"ellipse":case"quadratic":case"cubic":case"draw":case"text":case"MOVE":case"reset":e=document.createElement("input"),e.setAttribute("type","button"),u?e.setAttribute("value",u):e.setAttribute("value",l[r].function.charAt(0).toUpperCase()+l[r].function.slice(1)),e.setAttribute("id","b_"+l[r].function.toLowerCase()),d.appendChild(e);var t=l[r].function;e.addEventListener("click",(function(e){Ct(t)}));break;case"mode":n=document.createElement("span"),n.setAttribute("id","mode"),d.appendChild(n);break;case"zoomin":e=document.createElement("input"),e.setAttribute("type","button"),e.setAttribute("value","Zoom IN"),e.setAttribute("id","b_zoomin"),d.appendChild(e),e.addEventListener("click",(function(t){e.blur(),Ft()}));break;case"zoom":e=document.createElement("span"),e.setAttribute("id","zoom"),e.setAttribute("innerHTML"," Zoom:  ----"),d.appendChild(e);break;case"zoomout":e=document.createElement("input"),e.setAttribute("type","button"),e.setAttribute("value","Zoom OUT"),e.setAttribute("id","b_zoomout"),d.appendChild(e),e.addEventListener("click",(function(t){e.blur(),Mt()}));break;case"textheight":n=document.createElement("span"),n.setAttribute("id","textBlock"),d.appendChild(n);var o=document.createElement("span");o.innerHTML=" Text Size: ",n.appendChild(o),e=document.createElement("input"),e.setAttribute("id","textHeight"),e.setAttribute("type","number"),e.setAttribute("min","5"),e.setAttribute("step","5"),e.setAttribute("max","300"),e.setAttribute("style","width: 4em"),e.setAttribute("value","75"),n.appendChild(e),e.addEventListener("change",(function(t){Dt()}));break;case"newline":d.appendChild(document.createElement("br")),n=document.createElement("span"),n.innerHTML="Select color: ",d.appendChild(n);break;case"colorselect":var s={buttons:[{color:"#FF0000"},{color:"#00FF00"},{color:"#0000FF"},{color:"#000000"},{color:"#666666"},{color:"#FF0000"}]},c=void 0;for(c=0;c<s.buttons.length;c++)if(4==c&&(e=document.createElement("input"),e.setAttribute("id","userColor"),e.setAttribute("type","text"),e.setAttribute("value",s.buttons[c].color),e.setAttribute("style","width: 5em"),d.appendChild(e),e.addEventListener("change",(function(t){Bt(Vt()),e.blur()})),e=document.createElement("input"),e.setAttribute("id","selectUserColor"),e.setAttribute("type","button"),e.setAttribute("style","background-color: "+s.buttons[c].color),d.appendChild(e),e.addEventListener("click",(function(t){Ot(Vt()),e.blur()}))),c<s.buttons.length-2&&function(){e=document.createElement("input"),e.setAttribute("type","button"),e.setAttribute("style","background-color: "+s.buttons[c].color),d.appendChild(e);var t=s.buttons[c].color;e.addEventListener("click",(function(n){Ot(t),e.blur()}))}(),c>s.buttons.length-2){var p=document.createElement("span");p.innerHTML=" Selected Color >",d.appendChild(p),e=document.createElement("input"),e.setAttribute("id","cursorColor"),e.setAttribute("type","button"),e.setAttribute("style","background-color: "+s.buttons[c].color),d.appendChild(e),i=s.buttons[c].color}break;case"arrowspecs":n=document.createElement("span"),n.setAttribute("id","arrowBlock"),n.innerHTML+=" &nbsp;Arrowhead: Closed:",e=document.createElement("input"),e.setAttribute("id","arrowHeadClosed"),e.setAttribute("type","checkbox"),n.appendChild(e),e.addEventListener("click",(function(t){document.getElementById("arrowHeadClosed").checked})),n.innerHTML+=" &nbsp; Fixed:",e=document.createElement("input"),e.setAttribute("id","arrowHeadPixels"),e.setAttribute("type","checkbox"),n.appendChild(e),e.addEventListener("click",(function(t){document.getElementById("arrowHeadPixels").checked})),n.innerHTML+=" &nbsp; Length:",e=document.createElement("input"),e.setAttribute("id","arrowHeadLength"),e.setAttribute("type","number"),e.setAttribute("value","50"),e.setAttribute("style","width: 4em"),n.appendChild(e),e.addEventListener("change",(function(t){_.prototype.apiArrowLength()})),n.innerHTML+=" &nbsp; Percent:",e=document.createElement("input"),e.setAttribute("id","arrowHeadPercent"),e.setAttribute("type","number"),e.setAttribute("min","5"),e.setAttribute("step","1"),e.setAttribute("max","30"),e.setAttribute("style","width: 4em"),e.setAttribute("value","10"),n.appendChild(e),n.addEventListener("change",(function(t){e.blur(),L=parseFloat(document.getElementById("arrowHeadPercent").value)})),d.appendChild(n);break;case"json":e=document.createElement("input"),e.setAttribute("id","saveSVG"),e.setAttribute("type","button"),e.setAttribute("value","Extract SVG"),d.appendChild(e),e.addEventListener("click",(function(t){e.blur(),_.prototype.showSVG(!0)})),e=document.createElement("input"),e.setAttribute("id","plainSVG"),e.setAttribute("type","button"),e.setAttribute("value","Plain SVG"),d.appendChild(e),e.addEventListener("click",(function(t){e.blur(),_.prototype.showSVG(!1)})),e=document.createElement("input"),e.setAttribute("id","svgJSON"),e.setAttribute("type","button"),e.setAttribute("value","JSON SVG"),d.appendChild(e),e.addEventListener("click",(function(t){_.prototype.jsonSVG(!1)})),d.appendChild(document.createElement("br"));var v=document.createElement("textarea");v.setAttribute("id","textSVGorJSON"),d.appendChild(v);break}})()}}()},_.prototype.apiTextHeight=function(t){bt(t)&&(I=t)},_.prototype.apiArrowClosed=function(t){t},_.prototype.apiArrowFixed=function(t){t},_.prototype.apiArrowLength=function(t){t?bt(t)&&t:parseFloat(document.getElementById("arrowHeadLemgth").value)},_.prototype.apiArrowPercent=function(t){bt(t)&&(L=t)},_.prototype.apiStrokeWidth=function(t){bt(t)&&(C=t)};var Rt=_,Ut=(new Rt(document.getElementById("container")),document.getElementById("container")),zt=document.getElementById("image_file");function $t(t){var e=t.target.files,n=Ut.children[0];n&&n.parentNode.removeChild(n);var r=document.getElementById("svgMenu");if(r&&r.parentNode.removeChild(r),FileReader&&e&&e.length){var i=new FileReader;i.onload=function(t){Ut.attributes["data-image"].value=i.result,new Rt(Ut)},i.readAsDataURL(e[0])}}zt.addEventListener("change",(function(t){$t(t)}))},fdef:function(t,e){t.exports="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff"}})}));
//# sourceMappingURL=svg-detailer.umd.min.js.map